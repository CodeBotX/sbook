<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bài Tập Quá Khứ Hoàn Thành Đơn</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* General body styling */
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #f0f2f5;
            line-height: 1.6;
            color: #333;
            padding-top: 40px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        /* Main container for the exercise */
        .container-main {
            max-width: 900px;
            margin-top: 40px;
            margin-bottom: 40px;
            background-color: #ffffff;
            padding: 35px 45px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        /* Headings */
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 25px;
            font-weight: 700;
        }
        h2 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 25px;
            font-weight: 600;
        }

        /* Instruction section styling */
        .instruction {
            font-size: 1.1em;
            margin-bottom: 30px;
            color: #555;
            text-align: center;
            line-height: 1.5;
            background-color: #e8f5e9;
            border-left: 6px solid #4CAF50;
            padding: 20px 25px;
            border-radius: 10px;
            color: #388e3c;
        }

        /* Styling for each exercise item (question line) */
        .exercise-item {
            margin-bottom: 25px; /* Increased margin for better separation */
            display: flex;
            align-items: baseline; /* Align text baselines */
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
        }
        .exercise-item .question-number {
            font-weight: 600;
            color: #2c3e50;
            margin-right: 15px;
            flex-shrink: 0;
        }
        .exercise-item .text-segment {
            margin-right: 5px;
            display: inline;
            white-space: pre-wrap;
        }
        .exercise-item .answer-input {
            flex-grow: 1; /* Allow input to grow and fill space */
            min-width: 150px; /* Minimum width for input */
            max-width: 300px; /* Max width to prevent overly long inputs */
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid #ced4da;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
            font-size: 1em; /* Ensure font size is readable */
        }
        .exercise-item .answer-input:focus {
            border-color: #86b7fe;
            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
        }
        /* Feedback borders for inputs */
        .exercise-item .answer-input.is-valid {
            border-color: #198754 !important;
            box-shadow: 0 0 0 0.25rem rgba(25, 135, 84, 0.25) !important;
            background-color: #d1e7dd;
            color: #0f5132;
        }
        .exercise-item .answer-input.is-invalid {
            border-color: #dc3545 !important;
            box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.25) !important;
            background-color: #f8d7da;
            color: #842029;
        }

        /* Hint word styling */
        .hint-word {
            font-weight: bold;
            color: #777;
            margin-left: 15px;
            flex-shrink: 0;
            font-size: 0.95em;
            text-align: right;
            min-width: 80px; /* Ensure hint word has enough space */
        }

        /* Feedback icons (check/cross) */
        .feedback-icon {
            margin-left: 10px;
            font-size: 1.2em;
            display: none; /* Hidden by default, shown by JS */
            flex-shrink: 0;
        }
        .feedback-icon.text-success { color: #198754; }
        .feedback-icon.text-danger { color: #dc3545; }

        /* Buttons styling */
        .buttons .btn {
            padding: 12px 30px;
            font-size: 1.1em;
            margin: 0 15px;
            border-radius: 30px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .buttons .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        /* Score display styling */
        .score-display {
            font-size: 1.3em;
            font-weight: 700;
            color: #007bff;
            margin-top: 30px;
            margin-bottom: 25px;
            text-align: center;
            padding: 10px 20px;
            border-radius: 8px;
            background-color: #e6f7ff;
            border: 1px solid #b3e0ff;
            display: none;
        }
        .score-display.text-success { background-color: #d1e7dd; border-color: #a3cfb4; color: #198754; }
        .score-display.text-warning { background-color: #fff3cd; border-color: #ffeeba; color: #ffc107; }
        .score-display.text-danger { background-color: #f8d7da; border-color: #f5c2c7; color: #dc3545; }

        /* Detailed solution section styling */
        .solution-section {
            margin-top: 40px;
            padding-top: 25px;
            border-top: 1px dashed #ced4da;
            display: none;
        }
        .solution-section h2 {
            color: #007bff;
            font-weight: 700;
            margin-bottom: 25px;
            text-align: center;
        }
        .solution-list .solution-item {
            margin-bottom: 20px;
            padding: 15px 20px;
            background-color: #f8f9fa;
            border-left: 5px solid #007bff;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .solution-list .solution-item .question-text-solution {
            font-weight: 600;
            color: #34495e;
            margin-bottom: 8px;
        }
        .solution-list .solution-item .correct-answer-text {
            font-weight: 700;
            color: #198754;
            text-decoration: underline;
            margin-right: 5px;
        }
        .solution-list .solution-item .grammar-explanation {
            font-size: 0.9em;
            color: #6c757d;
            margin-top: 5px;
            background-color: #e9ecef;
            padding: 8px 12px;
            border-radius: 5px;
            border-left: 3px solid #6c757d;
        }
        .solution-list .solution-item .translation {
            font-style: italic;
            color: #6c757d;
            font-size: 0.95em;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px dashed #e0e0e0;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container-main {
                padding: 25px;
                margin: 20px auto;
            }
            h1 {
                font-size: 1.8em;
            }
            h2 {
                font-size: 1.5em;
            }
            .instruction {
                font-size: 0.95em;
                padding: 15px;
            }
            .exercise-item {
                flex-direction: column; /* Stack elements vertically */
                align-items: flex-start;
            }
            .exercise-item .question-number {
                margin-right: 0;
                margin-bottom: 5px;
            }
            .exercise-item .text-segment {
                margin-right: 0;
                margin-bottom: 5px;
            }
            .exercise-item .answer-input {
                width: 100%;
                max-width: 100%;
                margin-bottom: 10px;
            }
            .hint-word {
                margin-left: 0;
                text-align: left;
                width: 100%;
                margin-top: 5px;
            }
            .feedback-icon {
                margin-left: 0;
                margin-top: 5px;
            }
            .buttons .btn {
                font-size: 1.1em;
                padding: 10px 25px;
                margin: 0 8px;
            }
            .score-display {
                font-size: 1.3em;
                padding: 12px;
            }
            .solution-list .solution-item {
                padding: 10px 15px;
            }
            .solution-list .solution-item .grammar-explanation,
            .solution-list .solution-item .translation {
                font-size: 0.85em;
            }
        }
    </style>
</head>
<body>
    <div class="container container-main">
        <div class="d-flex align-items-center justify-content-center mb-4">
            <h1>Bài Tập Ngữ Pháp</h1>
        </div>
        <h2>Hoàn thành câu sử dụng thì Quá khứ Hoàn thành Đơn</h2>
        <p class="instruction">
            <strong>Instructions:</strong> Complete using the correct past perfect simple form of the verbs in brackets.
            <br>
            <strong>Hướng dẫn:</strong> Hoàn thành các câu sau bằng cách sử dụng dạng Quá khứ Hoàn thành Đơn đúng của động từ trong ngoặc.
            <br>
            <span class="text-muted">(Lưu ý: Đáp án và lời giải chi tiết sẽ hiển thị sau khi bạn nhấn "Kiểm tra".)</span>
        </p>

        <form id="grammarForm">
            <div class="exercise-item">
                <span class="question-number">1.</span>
                <span class="text-segment">By the time I arrived, everyone</span>
                <input type="text" class="form-control answer-input" id="q1" name="q1">
                <span class="text-segment">!</span>
                <span class="hint-word">(leave)</span>
                <i class="feedback-icon fa-solid" id="icon1"></i>
            </div>

            <div class="exercise-item">
                <span class="question-number">2.</span>
                <span class="text-segment">Steve</span>
                <input type="text" class="form-control answer-input" id="q2" name="q2">
                <span class="text-segment">the film, so he didn't come with us to the cinema.</span>
                <span class="hint-word">(already / see)</span>
                <i class="feedback-icon fa-solid" id="icon2"></i>
            </div>

            <div class="exercise-item">
                <span class="question-number">3.</span>
                <span class="text-segment">Tina</span>
                <input type="text" class="form-control answer-input" id="q3" name="q3">
                <span class="text-segment">doing the housework by seven o'clock, so she called Andrea to tell her she would be late.</span>
                <span class="hint-word">(not / finish)</span>
                <i class="feedback-icon fa-solid" id="icon3"></i>
            </div>

            <div class="exercise-item">
                <span class="question-number">4.</span>
                <input type="text" class="form-control answer-input" id="q4_part1" name="q4_part1">
                <span class="text-segment">you</span>
                <input type="text" class="form-control answer-input" id="q4_part2" name="q4_part2">
                <span class="text-segment">to Billy when I rang?</span>
                <span class="hint-word">(just / speak)</span>
                <i class="feedback-icon fa-solid" id="icon4"></i>
            </div>

            <div class="exercise-item">
                <span class="question-number">5.</span>
                <span class="text-segment">The car broke down just after</span>
                <input type="text" class="form-control answer-input" id="q5" name="q5">
                <span class="text-segment">.</span>
                <span class="hint-word">(we / set off)</span>
                <i class="feedback-icon fa-solid" id="icon5"></i>
            </div>

            <div class="exercise-item">
                <span class="question-number">6.</span>
                <span class="text-segment">I didn't eat anything at the party because</span>
                <input type="text" class="form-control answer-input" id="q6" name="q6">
                <span class="text-segment">at home.</span>
                <span class="hint-word">(I / already / eat)</span>
                <i class="feedback-icon fa-solid" id="icon6"></i>
            </div>

            <div class="exercise-item">
                <span class="question-number">7.</span>
                <input type="text" class="form-control answer-input" id="q7_part1" name="q7_part1">
                <span class="text-segment">you</span>
                <input type="text" class="form-control answer-input" id="q7_part2" name="q7_part2">
                <span class="text-segment">about the accident before you saw it on TV?</span>
                <span class="hint-word">(hear)</span>
                <i class="feedback-icon fa-solid" id="icon7"></i>
            </div>

            <div class="buttons text-center mt-5">
                <button type="button" class="btn btn-primary me-3" onclick="submitAnswers()">Kiểm tra</button>
                <button type="button" class="btn btn-secondary" onclick="resetExercise()">Làm lại</button>
            </div>
        </form>

        <div id="scoreDisplay" class="score-display mt-4"></div>

        <div class="solution-section" id="detailedSolution">
            <h2>Lời giải chi tiết và Giải thích</h2>
            <div class="solution-list">
                </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
        // Define correct answers, original text templates, translations, and explanations for each question
        const questionsData = {
            'q1': {
                answers: ['had left'],
                originalText: 'By the time I arrived, everyone {answer}!',
                translation: 'Khi tôi đến, mọi người đã rời đi hết rồi!',
                explanation: 'Sử dụng thì Quá khứ Hoàn thành Đơn để diễn tả một hành động (mọi người rời đi) xảy ra và hoàn thành trước một hành động khác trong quá khứ (tôi đến). "By the time" là dấu hiệu nhận biết.',
                grammar_note: 'Cấu trúc: S + had + P.P. "Leave" là động từ bất quy tắc, P.P. là "left".'
            },
            'q2': {
                answers: ['had already seen'],
                originalText: 'Steve {answer} the film, so he didn\'t come with us to the cinema.',
                translation: 'Steve đã xem bộ phim đó rồi, nên anh ấy không đi xem phim cùng chúng tôi.',
                explanation: 'Sử dụng thì Quá khứ Hoàn thành Đơn để diễn tả một hành động (Steve xem phim) xảy ra và hoàn thành trước một hành động khác trong quá khứ (anh ấy không đi xem phim). "Already" nhấn mạnh việc hoàn thành trước đó.',
                grammar_note: 'Cấu trúc: S + had + already + P.P. "See" là động từ bất quy tắc, P.P. là "seen".'
            },
            'q3': {
                answers: ['had not finished', 'hadn\'t finished'],
                originalText: 'Tina {answer} doing the housework by seven o\'clock, so she called Andrea to tell her she would be late.',
                translation: 'Tina vẫn chưa hoàn thành việc nhà lúc bảy giờ, nên cô ấy gọi Andrea để báo rằng cô ấy sẽ đến muộn.',
                explanation: 'Sử dụng thì Quá khứ Hoàn thành Đơn ở dạng phủ định để diễn tả một hành động chưa hoàn thành tính đến một thời điểm cụ thể trong quá khứ ("by seven o\'clock").',
                grammar_note: 'Cấu trúc phủ định: S + had + not + P.P. "Finish" là động từ có quy tắc, P.P. là "finished". "Finish" + V-ing.'
            },
            'q4_part1': { // Multi-part question
                answers: ['Had'],
                originalText: '{answer1} you {answer2} to Billy when I rang?',
                translation: 'Bạn vừa mới nói chuyện với Billy khi tôi gọi điện phải không?',
                explanation: 'Sử dụng thì Quá khứ Hoàn thành Đơn với "just" trong câu hỏi để hỏi về một hành động vừa mới xảy ra trước một hành động khác trong quá khứ.',
                grammar_note: 'Cấu trúc câu hỏi: Had + S + just + P.P.? "Speak" là động từ bất quy tắc, P.P. là "spoken".'
            },
            'q4_part2': {
                answers: ['just spoken']
            },
            'q5': {
                answers: ['we had set off'],
                originalText: 'The car broke down just after {answer}.',
                translation: 'Chiếc xe bị hỏng ngay sau khi chúng tôi khởi hành.',
                explanation: 'Sử dụng thì Quá khứ Hoàn thành Đơn để diễn tả hành động "set off" (khởi hành) xảy ra trước hành động "broke down" (hỏng xe) trong quá khứ. "Just after" nhấn mạnh thứ tự thời gian.',
                grammar_note: 'Cấu trúc: S + had + P.P. "Set off" là động từ bất quy tắc, P.P. là "set off".'
            },
            'q6': {
                answers: ['I had already eaten'],
                originalText: 'I didn\'t eat anything at the party because {answer} at home.',
                translation: 'Tôi không ăn gì ở bữa tiệc vì tôi đã ăn ở nhà rồi.',
                explanation: 'Sử dụng thì Quá khứ Hoàn thành Đơn để diễn tả hành động "eat" (ăn) xảy ra và hoàn thành trước hành động "didn\'t eat" (không ăn) ở bữa tiệc. "Already" nhấn mạnh việc hoàn thành trước đó.',
                grammar_note: 'Cấu trúc: S + had + already + P.P. "Eat" là động từ bất quy tắc, P.P. là "eaten".'
            },
            'q7_part1': { // Multi-part question
                answers: ['Had'],
                originalText: '{answer1} you {answer2} about the accident before you saw it on TV?',
                translation: 'Bạn đã nghe về vụ tai nạn trước khi bạn xem nó trên TV phải không?',
                explanation: 'Sử dụng thì Quá khứ Hoàn thành Đơn để hỏi về một hành động (nghe về tai nạn) xảy ra trước một hành động khác trong quá khứ (xem trên TV). "Before" là dấu hiệu nhận biết.',
                grammar_note: 'Cấu trúc câu hỏi: Had + S + P.P. + before + S + V2/ed? "Hear" là động từ bất quy tắc, P.P. là "heard".'
            },
            'q7_part2': {
                answers: ['heard']
            }
        };

        /**
         * Normalizes a string by converting to lowercase, trimming whitespace,
         * and replacing multiple spaces with a single space.
         * @param {string} answer - The string to normalize.
         * @returns {string} The normalized string.
         */
        function normalizeAnswer(answer) {
            return answer.toLowerCase().replace(/\s+/g, ' ').trim();
        }

        /**
         * Submits the user's answers, calculates the score, provides feedback,
         * and displays detailed solutions.
         */
        function submitAnswers() {
            let score = 0;
            const totalQuestions = Object.keys(questionsData).length; // Total questions based on correctAnswers object

            const solutionListDiv = document.querySelector('#detailedSolution .solution-list');
            solutionListDiv.innerHTML = ''; // Clear previous solutions
            document.getElementById('detailedSolution').style.display = 'block'; // Show solution section

            // Keep track of processed questions to avoid duplicate scoring/explanations for multi-part questions
            const processedQuestionNumbers = new Set();

            // Iterate through each question ID in the questionsData
            for (const qId in questionsData) {
                // If this is a part of a multi-part question (e.g., q4_part2), it will be handled by its _part1 counterpart
                if (qId.includes('_part') && !qId.endsWith('_part1')) {
                    continue;
                }

                const questionNumber = qId.includes('_part') ? qId.split('_part')[0].substring(1) : qId.substring(1);

                // Skip if this question number has already been processed (e.g., if q4_part1 handled q4_part2)
                if (processedQuestionNumbers.has(questionNumber)) {
                    continue;
                }

                let isQuestionCorrect = true;
                let currentQuestionAnswers = []; // To store answers for this logical question

                // Handle multi-part questions (e.g., q4, q7)
                if (qId.endsWith('_part1')) {
                    const baseQid = qId.split('_part')[0];
                    const input1 = document.getElementById(`${baseQid}_part1`);
                    const input2 = document.getElementById(`${baseQid}_part2`);
                    const correctInfo1 = questionsData[`${baseQid}_part1`];
                    const correctInfo2 = questionsData[`${baseQid}_part2`];

                    const userAnswer1 = normalizeAnswer(input1.value);
                    const userAnswer2 = normalizeAnswer(input2.value);

                    const isPart1Correct = correctInfo1.answers.some(ans => normalizeAnswer(ans) === userAnswer1);
                    const isPart2Correct = correctInfo2.answers.some(ans => normalizeAnswer(ans) === userAnswer2);

                    // Apply feedback to individual inputs
                    input1.classList.remove('is-valid', 'is-invalid');
                    input2.classList.remove('is-valid', 'is-invalid');

                    if (isPart1Correct) input1.classList.add('is-valid'); else input1.classList.add('is-invalid');
                    if (isPart2Correct) input2.classList.add('is-valid'); else input2.classList.add('is-invalid');

                    isQuestionCorrect = isPart1Correct && isPart2Correct;
                    currentQuestionAnswers = [correctInfo1.answers[0], correctInfo2.answers[0]];

                    // Get the feedback icon for the logical question (e.g., icon4 for q4)
                    const feedbackIcon = document.getElementById(`icon${questionNumber}`);
                    if (feedbackIcon) {
                        feedbackIcon.classList.remove('fa-check-circle', 'fa-times-circle', 'text-success', 'text-danger');
                        if (isQuestionCorrect) {
                            feedbackIcon.classList.add('fa-check-circle', 'text-success');
                        } else {
                            feedbackIcon.classList.add('fa-times-circle', 'text-danger');
                        }
                        feedbackIcon.style.display = 'inline-block';
                    }
                    originalTextTemplate = correctInfo1.originalText;
                    explanationInfo = correctInfo1;

                } else { // Handle single-part questions
                    const inputElement = document.getElementById(qId);
                    const userAnswer = normalizeAnswer(inputElement.value);
                    const correctInfo = questionsData[qId];

                    isQuestionCorrect = correctInfo.answers.some(ans => normalizeAnswer(ans) === userAnswer);
                    currentQuestionAnswers = [correctInfo.answers[0]];

                    // Apply feedback to input
                    inputElement.classList.remove('is-valid', 'is-invalid');
                    if (isQuestionCorrect) inputElement.classList.add('is-valid'); else inputElement.classList.add('is-invalid');

                    // Get the feedback icon for the logical question
                    const feedbackIcon = document.getElementById(`icon${questionNumber}`);
                    if (feedbackIcon) {
                        feedbackIcon.classList.remove('fa-check-circle', 'fa-times-circle', 'text-success', 'text-danger');
                        if (isQuestionCorrect) {
                            feedbackIcon.classList.add('fa-check-circle', 'text-success');
                        } else {
                            feedbackIcon.classList.add('fa-times-circle', 'text-danger');
                        }
                        feedbackIcon.style.display = 'inline-block';
                    }
                    originalTextTemplate = correctInfo.originalText;
                    explanationInfo = correctInfo;
                }

                if (isQuestionCorrect) {
                    score++;
                }
                processedQuestionNumbers.add(questionNumber); // Mark this logical question as processed

                // Add detailed solution for this logical question
                const solutionItem = document.createElement('div');
                solutionItem.classList.add('solution-item');

                const questionTextSolutionDiv = document.createElement('div');
                questionTextSolutionDiv.classList.add('question-text-solution');

                let fullSentenceHtml = `${questionNumber}. `;
                if (qId.endsWith('_part1')) {
                    const baseQid = qId.split('_part')[0];
                    fullSentenceHtml += originalTextTemplate
                        .replace('{answer1}', `<span class="correct-answer-text">${questionsData[`${baseQid}_part1`].answers[0]}</span>`)
                        .replace('{answer2}', `<span class="correct-answer-text">${questionsData[`${baseQid}_part2`].answers[0]}</span>`);
                } else {
                    fullSentenceHtml += originalTextTemplate.replace('{answer}', `<span class="correct-answer-text">${questionsData[qId].answers[0]}</span>`);
                }

                questionTextSolutionDiv.innerHTML = fullSentenceHtml;
                solutionItem.appendChild(questionTextSolutionDiv);

                const grammarExplanationDiv = document.createElement('div');
                grammarExplanationDiv.classList.add('grammar-explanation');
                grammarExplanationDiv.innerHTML = `<strong>Giải thích ngữ pháp & ngữ cảnh:</strong> ${explanationInfo.explanation}<br>${explanationInfo.grammar_note}`;
                solutionItem.appendChild(grammarExplanationDiv);

                const translationDiv = document.createElement('div');
                translationDiv.classList.add('translation');
                translationDiv.innerHTML = `<strong>Dịch:</strong> ${explanationInfo.translation}`;
                solutionItem.appendChild(translationDiv);

                solutionListDiv.appendChild(solutionItem);
            }

            // Display score
            const scoreDisplay = document.getElementById('scoreDisplay');
            scoreDisplay.textContent = `Bạn đã đạt ${score} / ${totalQuestions} điểm.`;

            // Apply color coding to score display based on performance
            scoreDisplay.classList.remove('text-success', 'text-warning', 'text-danger');
            if (score === totalQuestions) {
                scoreDisplay.classList.add('text-success');
            } else if (score >= totalQuestions / 2) {
                scoreDisplay.classList.add('text-warning');
            } else {
                scoreDisplay.classList.add('text-danger');
            }
            scoreDisplay.style.display = 'block'; // Show the score display

            // Scroll to the score display
            scoreDisplay.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        /**
         * Resets the exercise by clearing inputs, hiding feedback, score, and solutions.
         */
        function resetExercise() {
            const inputElements = document.querySelectorAll('.answer-input');
            inputElements.forEach(input => {
                input.value = ''; // Clear input value
                input.classList.remove('is-valid', 'is-invalid'); // Remove feedback classes
            });

            const feedbackIcons = document.querySelectorAll('.feedback-icon');
            feedbackIcons.forEach(icon => {
                icon.classList.remove('fa-check-circle', 'fa-times-circle', 'text-success', 'text-danger');
                icon.style.display = 'none'; // Hide feedback icon
            });

            document.getElementById('scoreDisplay').textContent = ''; // Clear score text
            document.getElementById('scoreDisplay').style.display = 'none'; // Hide score display
            document.getElementById('detailedSolution').style.display = 'none'; // Hide solution section
            document.querySelector('#detailedSolution .solution-list').innerHTML = ''; // Clear solutions list
        }
    </script>
</body>
</html>
