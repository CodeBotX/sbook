<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Formation - The Need to Play</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #f0f2f5;
            line-height: 1.6;
            color: #333;
            padding: 20px;
        }
        .container-main {
            max-width: 900px;
            margin: 40px auto;
            background-color: #ffffff;
            padding: 35px 45px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 25px;
            font-weight: 700;
        }
        .instruction {
            font-size: 1.1em;
            margin-bottom: 30px;
            color: #555;
            text-align: center;
            line-height: 1.5;
        }

        .exercise-image {
            text-align: center;
            margin-bottom: 30px;
        }
        .exercise-image img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .exercise-text {
            background-color: #fdfdfd;
            border: 1px solid #e0e0e0;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            line-height: 2.0;
            text-align: justify;
        }
        .exercise-text p {
            display: inline;
            line-height: inherit;
            margin-bottom: 15px; /* Add some bottom margin to paragraphs */
        }
        .exercise-text .answer-input {
            width: 120px;
            padding: 5px 10px;
            border-radius: 5px;
            border: 1px solid #ced4da;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
            display: inline-block;
            margin: 0 5px;
            vertical-align: bottom; /* Align input with the text */
        }
        .exercise-text .answer-input:focus {
            border-color: #86b7fe;
            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
        }
        .exercise-text .answer-input.is-valid {
            border-color: #198754 !important;
            box-shadow: 0 0 0 0.25rem rgba(25, 135, 84, 0.25) !important;
            background-color: #d1e7dd;
            color: #0f5132;
        }
        .exercise-text .answer-input.is-invalid {
            border-color: #dc3545 !important;
            box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.25) !important;
            background-color: #f8d7da;
            color: #842029;
        }
        .exercise-text .hint-word {
            font-weight: bold;
            color: #0d6efd;
            margin-left: 5px;
            font-size: 0.9em;
            vertical-align: bottom;
        }
        .exercise-item {
            margin-bottom: 20px;
        }

        .buttons .btn {
            padding: 12px 30px;
            font-size: 1.1em;
            margin: 0 15px;
            border-radius: 30px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .buttons .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .score-display {
            font-size: 1.3em;
            font-weight: 700;
            color: #007bff;
            margin-top: 30px;
            margin-bottom: 25px;
            text-align: center;
            padding: 10px 20px;
            border-radius: 8px;
            background-color: #e6f7ff;
            border: 1px solid #b3e0ff;
        }
        .score-display.text-success { background-color: #d1e7dd; border-color: #a3cfb4; color: #198754; }
        .score-display.text-warning { background-color: #fff3cd; border-color: #ffeeba; color: #ffc107; }
        .score-display.text-danger { background-color: #f8d7da; border-color: #f5c2c7; color: #dc3545; }

        .solution-section {
            margin-top: 40px;
            padding-top: 25px;
            border-top: 1px dashed #ced4da;
            display: none; /* Hidden by default */
        }
        .solution-section h2 {
            color: #007bff;
            font-weight: 700;
            margin-bottom: 25px;
            text-align: center;
        }
        .solution-list .solution-item {
            margin-bottom: 20px;
            padding: 15px 20px;
            background-color: #f8f9fa;
            border-left: 5px solid #007bff;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .solution-list .solution-item .question-text-solution {
            font-weight: 600;
            color: #34495e;
            margin-bottom: 8px;
        }
        .solution-list .solution-item .correct-answer-text-solution {
            font-weight: 700;
            color: #198754;
            text-decoration: underline;
        }
        .solution-list .solution-item .explanation {
            font-size: 0.9em;
            color: #6c757d;
            margin-top: 5px;
            background-color: #e9ecef;
            padding: 8px 12px;
            border-radius: 5px;
            border-left: 3px solid #6c757d;
        }
        .solution-list .solution-item .translation {
            font-style: italic;
            color: #6c757d;
            font-size: 0.95em;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px dashed #e0e0e0;
        }
    </style>
</head>
<body>
    <div class="container container-main">
        <div class="d-flex align-items-center justify-content-center mb-4">
            <span class="badge bg-primary fs-6 me-2">G</span>
            <h1>Use the word given in capitals at the end of each line to form a word that fits in the gap in the same line.</h1>
        </div>
        <p class="instruction">
            Sử dụng từ được viết hoa ở cuối mỗi dòng để tạo thành một từ phù hợp vào chỗ trống trong cùng dòng đó.
            <br>
            <span class="text-muted">(Lưu ý: Đáp án và lời giải chi tiết sẽ hiển thị sau khi bạn nhấn "Kiểm tra".)</span>
        </p>

        <div class="exercise-image">
            <img src="https://via.placeholder.com/600x300?text=Kittens+Playing" alt="Kittens Playing">
            </div>

        <form id="wordFormationCatsForm">
            <div class="exercise-text">
                <p>Why are kittens such (1) <input type="text" class="form-control answer-input" id="q1" name="q1"> animals? They love chasing a <span class="hint-word">PLAY</span></p>
                <p>ball or a piece of wool, and they always play in a very (2) <input type="text" class="form-control answer-input" id="q2" name="q2"> way. <span class="hint-word">ATHLETE</span></p>
                <p>But why? All of a kitten's (3) <input type="text" class="form-control answer-input" id="q3" name="q3"> when playing are, in <span class="hint-word">ACT</span></p>
                <p>fact, important for the future. It might look like (4) <input type="text" class="form-control answer-input" id="q4" name="q4"> , but <span class="hint-word">ENTERTAIN</span></p>
                <p>the kitten is practising its hunting skills. That (5) <input type="text" class="form-control answer-input" id="q5" name="q5"> onto a toy teaches the kitten a lot. <span class="hint-word">HERO</span></p>
                <p>Think about your own (6) <input type="text" class="form-control answer-input" id="q6" name="q6"> and you'll see that you learnt a lot through play. <span class="hint-word">CHILD</span></p>
            </div>

            <div class="buttons text-center mt-5">
                <button type="button" class="btn btn-primary me-3" onclick="submitAnswers()">Kiểm tra</button>
                <button type="button" class="btn btn-secondary" onclick="resetExercise()">Làm lại</button>
            </div>
        </form>

        <div id="scoreDisplay" class="score-display mt-4"></div>

        <div class="solution-section" id="detailedSolution">
            <h2>Lời giải chi tiết và Giải thích</h2>
            <div class="solution-list">
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTFyMfwGpGFFRKKoXpQf/ZtVKKjoF+L7ffy4qC7zQtxHiJitjEATj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkmXLRV5vfJzJrEPiniwz4rsVZpGgG8Y1r+KNuGMuwtj44gJjEnFqVfXpX5f" crossorigin="anonymous"></script>

    <script>
        const correctAnswers = {
            'q1': {
                original_word: 'PLAY',
                correct: 'playful',
                sentence_start: 'Why are kittens such ',
                sentence_end: ' animals? They love chasing a ball or a piece of wool...',
                explanation: 'Trước danh từ "animals" (động vật), cần một tính từ để miêu tả đặc điểm của chúng. "Playful" (hay chơi, tinh nghịch) là tính từ được hình thành từ động từ "play".',
                translation: 'Tại sao mèo con lại là những động vật tinh nghịch như vậy? Chúng thích đuổi theo một quả bóng hoặc một mẩu len...',
            },
            'q2': {
                original_word: 'ATHLETE',
                correct: 'athletic',
                sentence_start: '...and they always play in a very ',
                sentence_end: ' way. But why? All of a kitten\'s...',
                explanation: 'Trước danh từ "way" (cách), cần một tính từ để miêu tả cách chúng chơi. "Athletic" (khỏe khoắn, nhanh nhẹn) là tính từ liên quan đến "athlete" (vận động viên), miêu tả cách chơi năng động của mèo con.',
                translation: '...và chúng luôn chơi một cách rất nhanh nhẹn. Nhưng tại sao? Tất cả những hành động của một chú mèo con khi chơi...',
            },
            'q3': {
                original_word: 'ACT',
                correct: 'actions',
                sentence_start: 'But why? All of a kitten\'s ',
                sentence_end: ' when playing are, in fact, important for the future.',
                explanation: 'Sau sở hữu cách "kitten\'s" (của mèo con) và trước động từ "are", cần một danh từ số nhiều để chỉ những gì mèo con làm khi chơi. "Actions" (hành động) là dạng danh từ số nhiều của động từ "act".',
                translation: 'Nhưng tại sao? Tất cả những hành động của một chú mèo con khi chơi, trên thực tế, rất quan trọng cho tương lai.',
            },
            'q4': {
                original_word: 'ENTERTAIN',
                correct: 'entertainment', // Changed from 'entertaining' to 'entertainment' as it fits better as a noun here
                sentence_start: 'It might look like ',
                sentence_end: ', but the kitten is practising its hunting skills.',
                explanation: 'Sau "look like", cần một danh từ hoặc một cụm danh từ để miêu tả sự vật/hiện tượng mà nó giống. "Entertainment" (sự giải trí) là danh từ của "entertain".',
                translation: 'Có vẻ như đang giải trí, nhưng mèo con đang luyện tập kỹ năng săn mồi.',
            },
            'q5': {
                original_word: 'HERO',
                correct: 'heroic', // Changed from 'pounce' which was an error in previous response
                sentence_start: 'That ',
                sentence_end: ' onto a toy teaches the kitten a lot.',
                explanation: 'Ở đây cần một tính từ để miêu tả sự dũng cảm hay hành động anh hùng khi vồ mồi. "Heroic" (anh hùng, dũng cảm) là tính từ của "hero". Hoặc có thể là "leaps" (nhảy vọt) nếu từ gợi ý không phải HERO, nhưng với HERO thì "heroic" phù hợp hơn.',
                translation: 'Cú nhảy dũng cảm đó vào một món đồ chơi dạy cho mèo con rất nhiều điều.',
            },
            'q6': {
                original_word: 'CHILD',
                correct: 'childhood',
                sentence_start: 'Think about your own ',
                sentence_end: ' and you\'ll see that you learnt a lot through play.',
                explanation: 'Sau sở hữu cách "your own" (của riêng bạn) và trước liên từ "and", cần một danh từ chỉ giai đoạn trong đời. "Childhood" (thời thơ ấu) là danh từ được hình thành từ danh từ "child".',
                translation: 'Hãy nghĩ về thời thơ ấu của bạn và bạn sẽ thấy rằng bạn đã học được rất nhiều điều thông qua chơi đùa.',
            },
        };

        function normalizeAnswer(answer) {
            return answer.toLowerCase().trim();
        }

        function submitAnswers() {
            let score = 0;
            const totalQuestions = Object.keys(correctAnswers).length;
            const solutionListDiv = document.querySelector('#detailedSolution .solution-list');
            solutionListDiv.innerHTML = ''; // Clear previous solutions
            document.getElementById('detailedSolution').style.display = 'block'; // Show solution section

            Object.keys(correctAnswers).forEach(qId => {
                const inputElement = document.getElementById(qId);
                if (!inputElement) return;

                const userAnswer = normalizeAnswer(inputElement.value);
                const correctInfo = correctAnswers[qId];
                const isCorrect = normalizeAnswer(correctInfo.correct) === userAnswer;

                inputElement.classList.remove('is-valid', 'is-invalid');
                if (isCorrect) {
                    score++;
                    inputElement.classList.add('is-valid');
                } else {
                    inputElement.classList.add('is-invalid');
                }
                // Always display the correct answer in the input field after checking
                inputElement.value = correctInfo.correct;


                // Add detailed solution for each question
                const solutionItem = document.createElement('div');
                solutionItem.classList.add('solution-item');

                const questionNumber = qId.substring(1);
                const questionTextDiv = document.createElement('div');
                questionTextDiv.classList.add('question-text-solution');

                // Reconstruct sentence with correct answer
                const fullSentenceHtml = `<strong>Câu ${questionNumber}:</strong> ${correctInfo.sentence_start}` +
                                         `<span class="correct-answer-text-solution">${correctInfo.correct}</span>` +
                                         correctInfo.sentence_end +
                                         ` <span class="hint-word">(${correctInfo.original_word})</span>`;
                
                questionTextDiv.innerHTML = fullSentenceHtml;
                solutionItem.appendChild(questionTextDiv);

                // Add explanation
                const explanationDiv = document.createElement('div');
                explanationDiv.classList.add('explanation');
                explanationDiv.innerHTML = `<strong>Giải thích:</strong> ${correctInfo.explanation}`;
                solutionItem.appendChild(explanationDiv);

                // Add translation
                const translationDiv = document.createElement('div');
                translationDiv.classList.add('translation');
                translationDiv.innerHTML = `<strong>Dịch:</strong> ${correctInfo.translation}`;
                solutionItem.appendChild(translationDiv);
                
                solutionListDiv.appendChild(solutionItem);
            });

            // Display score
            const scoreDisplay = document.getElementById('scoreDisplay');
            scoreDisplay.textContent = `Bạn đã đạt ${score} / ${totalQuestions} điểm.`;

            scoreDisplay.classList.remove('text-success', 'text-warning', 'text-danger');
            if (score === totalQuestions) {
                scoreDisplay.classList.add('text-success');
            } else if (score >= totalQuestions / 2) {
                scoreDisplay.classList.add('text-warning');
            } else {
                scoreDisplay.classList.add('text-danger');
            }
        }

        function resetExercise() {
            const inputs = document.querySelectorAll('.answer-input');
            inputs.forEach(input => {
                input.value = '';
                input.classList.remove('is-valid', 'is-invalid');
            });

            document.getElementById('scoreDisplay').textContent = ''; // Clear score
            document.getElementById('detailedSolution').style.display = 'none'; // Hide solution section
            document.querySelector('#detailedSolution .solution-list').innerHTML = ''; // Clear solutions
        }
    </script>
</body>
</html>