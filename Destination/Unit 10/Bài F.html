<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bài Tập F: The National Trust</title>
    <!-- Thư viện Font Awesome để hiển thị icon phản hồi -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Liên kết đến tệp CSS tùy chỉnh của bạn -->
    <link rel="stylesheet" href="../../assets/css/style.css">
    <style>
        /* CSS bổ sung cho bài tập này */
        .passage-container {
            background-color: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .passage-title {
            color: #2c3e50;
            font-size: 1.4em;
            font-weight: 700;
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #3498db;
        }
        
        .sentence-container {
            background-color: #ffffff;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .sentence-container:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        
        .sentence-number {
            display: inline-block;
            background-color: #3498db;
            color: white;
            font-weight: 700;
            padding: 4px 8px;
            border-radius: 50%;
            font-size: 0.9em;
            margin-right: 10px;
            min-width: 25px;
            text-align: center;
        }
        
        .sentence-text {
            font-size: 1.1em;
            line-height: 1.6;
            color: #2c3e50;
            display: inline;
        }
        
        .sentence-text input[type="text"] {
            display: inline-block;
            width: 120px;
            margin: 0 5px;
            padding: 8px 12px;
            border: 2px solid #ced4da;
            border-radius: 6px;
            font-size: 1em;
            text-align: center;
            transition: all 0.3s ease;
            background-color: #fff;
        }
        
        .sentence-text input[type="text"]:focus {
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
            outline: none;
        }
        
        .sentence-text input[type="text"].is-correct {
            border-color: #27ae60;
            background-color: #d5f4e6;
        }
        
        .sentence-text input[type="text"].is-incorrect {
            border-color: #e74c3c;
            background-color: #fdf2f2;
        }
        
        .feedback-icon {
            margin-left: 10px;
            font-size: 1.2em;
            display: none;
            vertical-align: middle;
        }
        
        .feedback-icon.text-success { 
            color: #27ae60; 
        }
        
        .feedback-icon.text-danger { 
            color: #e74c3c; 
        }
        
        .instruction {
            background-color: #e8f4fd;
            border-left: 5px solid #3498db;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            font-size: 1.1em;
            line-height: 1.6;
        }
        
        .instruction strong {
            color: #2c3e50;
        }
        
        @media (max-width: 768px) {
            .passage-container {
                padding: 15px;
            }
            
            .sentence-container {
                padding: 12px 15px;
            }
            
            .sentence-text input[type="text"] {
                width: 100px;
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="container-main">
        <h1>Bài Tập F: The National Trust</h1>
        <h2>Điền một từ vào mỗi chỗ trống</h2>

        <div class="instruction">
            <strong>Hướng dẫn:</strong> Đọc kỹ đoạn văn về The National Trust và điền một từ thích hợp vào mỗi chỗ trống. Bài tập này tập trung vào việc sử dụng thì bị động (passive voice) trong tiếng Anh.
        </div>

        <form id="fillInTheBlanksFormF">
            <div class="passage-container">
                <div class="passage-title">The National Trust</div>
                
                <div class="sentence-container">
                    <span class="sentence-number">1</span>
                    <div class="sentence-text">
                        There are lots of beautiful, large houses in Britain. Many of them 
                        <input type="text" id="qF1" name="qF1">
                        built hundreds of years ago.
                        <i class="feedback-icon fa-solid" id="iconF1"></i>
                    </div>
                </div>
                
                <div class="sentence-container">
                    <span class="sentence-number">2</span>
                    <div class="sentence-text">
                        In the past, they 
                        <input type="text" id="qF2" name="qF2">
                        owned by very rich families.
                        <i class="feedback-icon fa-solid" id="iconF2"></i>
                    </div>
                </div>
                
                <div class="sentence-container">
                    <span class="sentence-number">3</span>
                    <div class="sentence-text">
                        Today, many of them 
                        <input type="text" id="qF3" name="qF3">
                        owned by an organisation called The National Trust, which 
                        <input type="text" id="qF4" name="qF4">
                        created to look after them.
                        <i class="feedback-icon fa-solid" id="iconF3"></i>
                        <i class="feedback-icon fa-solid" id="iconF4"></i>
                    </div>
                </div>
                
                <div class="sentence-container">
                    <span class="sentence-number">4</span>
                    <div class="sentence-text">
                        The houses 
                        <input type="text" id="qF5" name="qF5">
                        kept in perfect condition, and visitors 
                        <input type="text" id="qF6" name="qF6">
                        allowed to look round them.
                        <i class="feedback-icon fa-solid" id="iconF5"></i>
                        <i class="feedback-icon fa-solid" id="iconF6"></i>
                    </div>
                </div>
                
                <div class="sentence-container">
                    <span class="sentence-number">5</span>
                    <div class="sentence-text">
                        It's interesting to learn how different life was in an old house. Milk was 
                        <input type="text" id="qF7" name="qF7">
                        kept in the fridge, because they didn't have fridges!
                        <i class="feedback-icon fa-solid" id="iconF7"></i>
                    </div>
                </div>
                
                <div class="sentence-container">
                    <span class="sentence-number">6</span>
                    <div class="sentence-text">
                        Washing machines 
                        <input type="text" id="qF8" name="qF8">
                        only invented very recently, so washing 
                        <input type="text" id="qF9" name="qF9">
                        done by hand.
                        <i class="feedback-icon fa-solid" id="iconF8"></i>
                        <i class="feedback-icon fa-solid" id="iconF9"></i>
                    </div>
                </div>
                
                <div class="sentence-container">
                    <span class="sentence-number">7</span>
                    <div class="sentence-text">
                        In some cases, the house 
                        <input type="text" id="qF10" name="qF10">
                        still lived in today.
                        <i class="feedback-icon fa-solid" id="iconF10"></i>
                    </div>
                </div>
                
                <div class="sentence-container">
                    <span class="sentence-number">8</span>
                    <div class="sentence-text">
                        When this happens, visitors 
                        <input type="text" id="qF11" name="qF11">
                        only shown part of the house.
                        <i class="feedback-icon fa-solid" id="iconF11"></i>
                    </div>
                </div>
                
                <div class="sentence-container">
                    <span class="sentence-number">9</span>
                    <div class="sentence-text">
                        The private rooms 
                        <input type="text" id="qF12" name="qF12">
                        kept closed to the public.
                        <i class="feedback-icon fa-solid" id="iconF12"></i>
                    </div>
                </div>
                
                <div class="sentence-container">
                    <span class="sentence-number">10</span>
                    <div class="sentence-text">
                        These houses often have beautiful gardens, too. The gardens 
                        <input type="text" id="qF13" name="qF13">
                        looked after by professional gardeners.
                        <i class="feedback-icon fa-solid" id="iconF13"></i>
                    </div>
                </div>
                
                <div class="sentence-container">
                    <span class="sentence-number">11</span>
                    <div class="sentence-text">
                        You usually have to pay to look round National Trust houses. Members of the National Trust 
                        <input type="text" id="qF14" name="qF14">
                        given a discount.
                        <i class="feedback-icon fa-solid" id="iconF14"></i>
                    </div>
                </div>
                
                <div class="sentence-container">
                    <span class="sentence-number">12</span>
                    <div class="sentence-text">
                        This year, millions of people 
                        <input type="text" id="qF15" name="qF15">
                        given the chance to see what life in an old country house was like.
                        <i class="feedback-icon fa-solid" id="iconF15"></i>
                    </div>
                </div>
            </div>

            <div class="buttons text-center mt-5">
                <button type="button" class="btn btn-primary me-3" onclick="submitAnswers('F')">Kiểm tra Bài F</button>
                <button type="button" class="btn btn-secondary" onclick="resetExercise('F')">Làm lại Bài F</button>
            </div>
        </form>

        <div id="scoreDisplayF" class="score-display mt-4"></div>

        <div class="solution-section" id="detailedSolutionF">
            <h2>Lời giải chi tiết và Giải thích Bài F</h2>
            <div class="solution-list">
            </div>
        </div>
    </div>

    <!-- Liên kết đến các tệp JavaScript của bạn -->
    <script src="../../assets/js/data-handler.js"></script>
    <script src="../../assets/js/fill-in-the-blank-handler.js"></script>
    <script src="../../assets/js/exercise-logic.js"></script>

    <script>
        const exerciseFData = {
            'qF1': {
                type: 'fill_in_the_blank',
                text_parts: ['Many of them (1) ', ' built hundreds of years ago.'],
                correct_answer: 'were',
                fullSentence: 'Many of them were built hundreds of years ago.',
                translation: 'Nhiều trong số chúng được xây dựng cách đây hàng trăm năm.',
                explanation: 'Câu này nói về các ngôi nhà được xây dựng trong quá khứ, sử dụng thì quá khứ đơn bị động. "Many of them" (nhiều trong số chúng) là chủ ngữ số nhiều, nên dùng "were".',
                grammar_note: 'Quá khứ đơn bị động: S + was/were + V3/ed.'
            },
            'qF2': {
                type: 'fill_in_the_blank',
                text_parts: ['In the past, they (2) ', ' owned by very rich families.'],
                correct_answer: 'were',
                fullSentence: 'In the past, they were owned by very rich families.',
                translation: 'Trong quá khứ, chúng thuộc sở hữu của những gia đình rất giàu có.',
                explanation: 'Tương tự câu (1), câu này cũng diễn tả hành động trong quá khứ và ở thể bị động. "They" là chủ ngữ số nhiều, nên dùng "were".',
                grammar_note: 'Quá khứ đơn bị động: S + was/were + V3/ed.'
            },
            'qF3': {
                type: 'fill_in_the_blank',
                text_parts: ['Today, many of them (3) ', ' owned by an organisation called The National Trust, which (4) '],
                correct_answer: 'are',
                fullSentence: 'Today, many of them are owned by an organisation called The National Trust, which (4) ',
                translation: 'Ngày nay, nhiều trong số chúng thuộc sở hữu của một tổ chức tên là The National Trust, tổ chức này (4) ',
                explanation: 'Câu này nói về tình trạng hiện tại ("Today"), sử dụng thì hiện tại đơn bị động. "Many of them" là chủ ngữ số nhiều, nên dùng "are".',
                grammar_note: 'Hiện tại đơn bị động: S + am/is/are + V3/ed.'
            },
            'qF4': {
                type: 'fill_in_the_blank',
                text_parts: ['which (4) ', ' created to look after them.'],
                correct_answer: 'was',
                fullSentence: 'which was created to look after them.',
                translation: 'tổ chức này được thành lập để chăm sóc chúng.',
                explanation: 'Tổ chức The National Trust được thành lập trong quá khứ, nên dùng thì quá khứ đơn bị động. "Which" ở đây thay thế cho "The National Trust" là số ít, nên dùng "was".',
                grammar_note: 'Quá khứ đơn bị động: S + was/were + V3/ed.'
            },
            'qF5': {
                type: 'fill_in_the_blank',
                text_parts: ['The houses (5) ', ' kept in perfect condition, and visitors (6) '],
                correct_answer: 'are',
                fullSentence: 'The houses are kept in perfect condition, and visitors (6) ',
                translation: 'Những ngôi nhà được giữ trong tình trạng hoàn hảo, và du khách (6) ',
                explanation: 'Câu này nói về tình trạng hiện tại của các ngôi nhà, sử dụng thì hiện tại đơn bị động. "The houses" là chủ ngữ số nhiều, nên dùng "are".',
                grammar_note: 'Hiện tại đơn bị động: S + am/is/are + V3/ed.'
            },
            'qF6': {
                type: 'fill_in_the_blank',
                text_parts: ['and visitors (6) ', ' allowed to look round them.'],
                correct_answer: 'are',
                fullSentence: 'and visitors are allowed to look round them.',
                translation: 'và du khách được phép tham quan chúng.',
                explanation: 'Câu này nói về sự cho phép ở hiện tại. "Visitors" là chủ ngữ số nhiều, nên dùng "are allowed".',
                grammar_note: 'Hiện tại đơn bị động: S + am/is/are + V3/ed.'
            },
            'qF7': {
                type: 'fill_in_the_blank',
                text_parts: ['Milk was (7) ', ' kept in the fridge, because they didn\'t have fridges!'],
                correct_answer: 'not',
                fullSentence: 'Milk was not kept in the fridge, because they didn\'t have fridges!',
                translation: 'Sữa không được giữ trong tủ lạnh, vì họ không có tủ lạnh!',
                explanation: 'Câu này diễn tả một sự thật trong quá khứ (họ không có tủ lạnh) dẫn đến việc sữa không được giữ trong tủ lạnh. Cần một từ phủ định.',
                grammar_note: 'Thì quá khứ đơn bị động phủ định: S + wasn\'t/weren\'t + V3/ed.'
            },
            'qF8': {
                type: 'fill_in_the_blank',
                text_parts: ['Washing machines (8) ', ' only invented very recently, so washing (9) '],
                correct_answer: 'were',
                fullSentence: 'Washing machines were only invented very recently, so washing (9) ',
                translation: 'Máy giặt chỉ mới được phát minh gần đây, vì vậy việc giặt giũ (9) ',
                explanation: 'Máy giặt được phát minh trong quá khứ, sử dụng thì quá khứ đơn bị động. "Washing machines" là chủ ngữ số nhiều, nên dùng "were".',
                grammar_note: 'Quá khứ đơn bị động: S + was/were + V3/ed.'
            },
            'qF9': {
                type: 'fill_in_the_blank',
                text_parts: ['so washing (9) ', ' done by hand.'],
                correct_answer: 'was',
                fullSentence: 'so washing was done by hand.',
                translation: 'vì vậy việc giặt giũ được thực hiện bằng tay.',
                explanation: 'Việc giặt giũ được thực hiện bằng tay trong quá khứ, sử dụng thì quá khứ đơn bị động. "Washing" là danh từ không đếm được, coi là số ít, nên dùng "was".',
                grammar_note: 'Quá khứ đơn bị động: S + was/were + V3/ed.'
            },
            'qF10': {
                type: 'fill_in_the_blank',
                text_parts: ['In some cases, the house (10) ', ' still lived in today.'],
                correct_answer: 'is',
                fullSentence: 'In some cases, the house is still lived in today.',
                translation: 'Trong một số trường hợp, ngôi nhà vẫn còn được sinh sống ngày nay.',
                explanation: 'Câu này nói về tình trạng hiện tại của ngôi nhà ("today"), sử dụng thì hiện tại đơn bị động. "The house" là chủ ngữ số ít, nên dùng "is".',
                grammar_note: 'Hiện tại đơn bị động: S + am/is/are + V3/ed.'
            },
            'qF11': {
                type: 'fill_in_the_blank',
                text_parts: ['When this happens, visitors (11) ', ' only shown part of the house.'],
                correct_answer: 'are',
                fullSentence: 'When this happens, visitors are only shown part of the house.',
                translation: 'Khi điều này xảy ra, du khách chỉ được cho xem một phần của ngôi nhà.',
                explanation: 'Câu này nói về một sự thật hoặc quy tắc chung ở hiện tại. "Visitors" là chủ ngữ số nhiều, nên dùng "are".',
                grammar_note: 'Hiện tại đơn bị động: S + am/is/are + V3/ed.'
            },
            'qF12': {
                type: 'fill_in_the_blank',
                text_parts: ['The private rooms (12) ', ' kept closed to the public.'],
                correct_answer: 'are',
                fullSentence: 'The private rooms are kept closed to the public.',
                translation: 'Các phòng riêng được giữ kín với công chúng.',
                explanation: 'Câu này nói về tình trạng hiện tại của các phòng riêng, sử dụng thì hiện tại đơn bị động. "The private rooms" là chủ ngữ số nhiều, nên dùng "are".',
                grammar_note: 'Hiện tại đơn bị động: S + am/is/are + V3/ed.'
            },
            'qF13': {
                type: 'fill_in_the_blank',
                text_parts: ['The gardens (13) ', ' looked after by professional gardeners.'],
                correct_answer: 'are',
                fullSentence: 'The gardens are looked after by professional gardeners.',
                translation: 'Những khu vườn được chăm sóc bởi những người làm vườn chuyên nghiệp.',
                explanation: 'Câu này nói về hành động thường xuyên ở hiện tại. "The gardens" là chủ ngữ số nhiều, nên dùng "are".',
                grammar_note: 'Hiện tại đơn bị động: S + am/is/are + V3/ed.'
            },
            'qF14': {
                type: 'fill_in_the_blank',
                text_parts: ['Members of the National Trust (14) ', ' given a discount.'],
                correct_answer: 'are',
                fullSentence: 'Members of the National Trust are given a discount.',
                translation: 'Các thành viên của The National Trust được giảm giá.',
                explanation: 'Câu này nói về một quy tắc hoặc sự thật chung ở hiện tại. "Members" là chủ ngữ số nhiều, nên dùng "are".',
                grammar_note: 'Hiện tại đơn bị động: S + am/is/are + V3/ed.'
            },
            'qF15': {
                type: 'fill_in_the_blank',
                text_parts: ['This year, millions of people (15) ', ' given the chance to see what life in an old country house was like.'],
                correct_answer: 'have been',
                fullSentence: 'This year, millions of people have been given the chance to see what life in an old country house was like.',
                translation: 'Năm nay, hàng triệu người đã được trao cơ hội để xem cuộc sống trong một ngôi nhà nông thôn cổ kính như thế nào.',
                explanation: 'Câu này cần thì hiện tại hoàn thành bị động (Present Perfect Passive) vì có "This year" (năm nay) chỉ một khoảng thời gian chưa kết thúc, và hành động "give" (trao) đã xảy ra và có kết quả liên quan đến hiện tại.',
                grammar_note: 'Hiện tại hoàn thành bị động: S + have/has been + V3/ed.'
            }
        };

        // Gán dữ liệu câu hỏi cho biến toàn cục trong data-handler.js
        document.addEventListener('DOMContentLoaded', function() {
            setQuestionsData(exerciseFData);
        });
        
        // Wrapper functions để gọi logic từ exercise-logic.js
        function submitAnswers(exerciseType) {
            let currentQuestionsData;
            let formId;
            let scoreDisplayId;
            let solutionSectionId;

            if (exerciseType === 'F') {
                currentQuestionsData = exerciseFData;
                formId = 'fillInTheBlanksFormF';
                scoreDisplayId = 'scoreDisplayF';
                solutionSectionId = 'detailedSolutionF';
            } else {
                console.error('Invalid exercise type:', exerciseType);
                return;
            }
            
            setQuestionsData(currentQuestionsData); // Cập nhật questionsData toàn cục
            submitAnswersLogic(formId, scoreDisplayId, solutionSectionId);
        }

        function resetExercise(exerciseType) {
            let formId;
            let scoreDisplayId;
            let solutionSectionId;

            if (exerciseType === 'F') {
                formId = 'fillInTheBlanksFormF';
                scoreDisplayId = 'scoreDisplayF';
                solutionSectionId = 'detailedSolutionF';
            } else {
                console.error('Invalid exercise type:', exerciseType);
                return;
            }
            resetExerciseLogic(formId, scoreDisplayId, solutionSectionId);
        }
    </script>
</body>
</html>
