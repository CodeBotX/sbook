<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i T·∫≠p Ng·ªØ Ph√°p v√† T·ª´ V·ª±ng</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Google Fonts for 'Open Sans' -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* General body styling */
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #f0f2f5;
            line-height: 1.6;
            color: #333;
            padding-top: 40px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        /* Main container for the exercise */
        .container-main {
            max-width: 950px;
            margin-top: 40px;
            margin-bottom: 40px;
            background-color: #ffffff;
            padding: 35px 45px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        /* Headings */
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 25px;
            font-weight: 700;
        }
        h2 {
            color: #2c3e50;
            margin-top: 30px;
            margin-bottom: 20px;
            font-weight: 600;
        }

        /* Instruction section styling */
        .instruction {
            font-size: 1.1em;
            margin-bottom: 30px;
            color: #555;
            text-align: center;
            line-height: 1.5;
            background-color: #e8f5e9;
            border-left: 6px solid #4CAF50;
            padding: 20px 25px;
            border-radius: 10px;
            color: #388e3c;
        }

        /* Question item styling */
        .question-item {
            display: flex;
            align-items: baseline;
            margin-bottom: 15px;
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
        }
        .question-item .question-number {
            font-weight: 700;
            margin-right: 10px;
            color: #007bff;
            font-size: 1.1em;
            flex-shrink: 0;
            width: 30px; /* Fixed width for alignment */
            text-align: right;
        }
        .question-item .question-content {
            flex-grow: 1;
            font-size: 1em;
            color: #34495e;
            line-height: 1.5;
            /* Default to inline-flex for sentence flow */
            display: inline-flex;
            flex-wrap: wrap;
            align-items: baseline;
            gap: 5px; /* Small gap between sentence parts and options */
        }
        .question-item .question-content > span {
            display: inline; /* Ensure text parts remain inline */
        }

        /* Styles for interactive options */
        .option-group {
            display: inline-flex; /* Use inline-flex to keep options together in sentence flow */
            flex-wrap: wrap;
            gap: 5px; /* Space between options within the group */
            align-items: baseline;
        }

        .option-item {
            padding: 6px 10px; /* Slightly smaller padding for inline options */
            border: 1px solid #ced4da;
            border-radius: 15px; /* Rounded pill shape */
            cursor: pointer;
            transition: background-color 0.2s ease, border-color 0.2s ease, transform 0.1s ease;
            font-size: 0.95em;
            color: #495057;
            background-color: #f8f9fa;
            user-select: none; /* Prevent text selection on click */
            white-space: nowrap; /* Prevent options from breaking mid-word */
        }

        .option-item:hover {
            background-color: #e9ecef;
            transform: translateY(-1px);
        }

        .option-item.selected-option {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
            font-weight: 600;
            box-shadow: 0 2px 5px rgba(0, 123, 255, 0.2);
        }

        /* Feedback for options */
        .option-item.is-correct {
            background-color: #d4edda; /* Light green */
            border-color: #28a745;
            color: #155724;
        }
        .option-item.is-correct.selected-option { /* Preserve selected style for correct */
            background-color: #28a745;
            color: white;
        }


        .option-item.is-incorrect {
            background-color: #f8d7da; /* Light red */
            border-color: #dc3545;
            color: #721c24;
        }
        .option-item.is-incorrect.selected-option { /* Preserve selected style for incorrect */
            background-color: #dc3545;
            color: white;
        }

        /* Hide the original select/input for A/B/C/D if using custom options */
        .question-content select,
        .question-content input[type="hidden"] { /* Target hidden input for storing values */
            display: none;
        }

        /* Ensure feedback icon is always visible when needed */
        .question-item .feedback-icon {
            margin-left: 10px;
            font-size: 1.2em;
            display: none; /* Hidden by default, shown by JS */
            vertical-align: middle;
            flex-shrink: 0;
            align-self: center; /* Align with the center of the options */
        }

        /* For A/B/C/D questions, make the options display block */
        .question-item.d-block .question-content {
            flex-direction: column; /* Stack sentence and options vertically */
            align-items: flex-start;
            display: flex; /* Override inline-flex for these questions */
        }
        .question-item.d-block .question-content .option-group {
            margin-top: 10px; /* More space for multiple choice options */
            display: flex; /* Keep options in a row */
            gap: 8px; /* Standard gap for A/B/C/D */
        }
        .question-item.d-block .question-content .option-item {
            width: auto; /* Allow options to size naturally */
            min-width: 50px; /* Smallest width for A/B/C/D */
            text-align: center;
            padding: 8px 15px; /* Restore larger padding for A/B/C/D */
            border-radius: 20px; /* Restore larger border-radius for A/B/C/D */
        }
        .question-item.d-block .question-content p {
            display: inline; /* Keep the sentence text inline */
        }
        .question-item.d-block .question-content .placeholder-text {
            display: inline-block; /* Placeholder for the gap */
            min-width: 80px; /* Give some width to the placeholder */
            text-align: center;
            border-bottom: 1px dashed #ccc;
            margin: 0 5px;
        }


        @media (max-width: 768px) {
            .container-main {
                padding: 25px;
                margin: 20px auto;
            }
            h1 {
                font-size: 1.8em;
            }
            h2 {
                font-size: 1.5em;
            }
            .instruction {
                font-size: 0.95em;
                padding: 15px;
            }
            .question-item {
                flex-direction: column;
                align-items: flex-start;
            }
            .question-item .question-number {
                width: auto;
                text-align: left;
                margin-bottom: 5px;
            }
            .question-item .question-content {
                width: 100%;
                display: flex; /* Ensure flex for column layout on small screens */
                flex-direction: column;
                align-items: flex-start;
            }
            .option-group {
                flex-direction: column;
                width: 100%;
                gap: 5px; /* Keep small gap for inline options */
            }
            .option-item {
                width: 100%;
                text-align: left;
            }
            .feedback-icon {
                margin-left: 0;
                margin-top: 5px;
                width: 100%;
                text-align: right;
            }
            .buttons .btn {
                font-size: 1em;
                padding: 10px 25px;
                margin: 0 8px;
            }
            .score-display {
                font-size: 1.2em;
                padding: 10px;
            }
            .solution-list .solution-item {
                padding: 10px 15px;
            }
            .solution-list .solution-item .grammar-explanation,
            .solution-list .solution-item .translation {
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container container-main">
        <div class="d-flex align-items-center justify-content-center mb-4">
            <h1>B√†i T·∫≠p Ng·ªØ Ph√°p v√† T·ª´ V·ª±ng T·ªïng H·ª£p</h1>
        </div>
        <p class="instruction">
            <strong>H∆∞·ªõng d·∫´n:</strong> Ho√†n th√†nh c√°c c√¢u sau b·∫±ng c√°ch ch·ªçn ho·∫∑c ƒëi·ªÅn t·ª´ ƒë√∫ng.
            <br>
            <span class="text-muted">(L∆∞u √Ω: ƒê√°p √°n v√† l·ªùi gi·∫£i chi ti·∫øt s·∫Ω hi·ªÉn th·ªã sau khi b·∫°n nh·∫•n "Ki·ªÉm tra".)</span>
        </p>

        <form id="combinedExerciseForm">
            <h2>I. Ch·ªçn d·∫°ng ƒë√∫ng c·ªßa t·ª´/ƒë·ªông t·ª´/c·ª•m t·ª´</h2>
            <div class="mb-4">
                <div class="question-item">
                    <span class="question-number">1.</span>
                    <div class="question-content">
                        <span>My full name is Nguyen Van Phuc. I </span>
                        <span class="option-group" id="options-q1">
                            <span class="option-item" data-question-id="q1" data-value="am also called" onclick="selectOption('q1', 'am also called', this)">am also called</span> /
                            <span class="option-item" data-question-id="q1" data-value="am also calling" onclick="selectOption('q1', 'am also calling', this)">am also calling</span>
                        </span>
                        <span> by my English name, which is Jason.</span>
                        <input type="hidden" id="q1" name="q1">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon1"></i>
                </div>

                <div class="question-item">
                    <span class="question-number">2.</span>
                    <div class="question-content">
                        <span>Does your name </span>
                        <span class="option-group" id="options-q2">
                            <span class="option-item" data-question-id="q2" data-value="had" onclick="selectOption('q2', 'had', this)">had</span> /
                            <span class="option-item" data-question-id="q2" data-value="have" onclick="selectOption('q2', 'have', this)">have</span>
                        </span>
                        <span> any special meaning?</span>
                        <input type="hidden" id="q2" name="q2">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon2"></i>
                </div>

                <div class="question-item">
                    <span class="question-number">3.</span>
                    <div class="question-content">
                        <span>If you </span>
                        <span class="option-group" id="options-q3">
                            <span class="option-item" data-question-id="q3" data-value="like" onclick="selectOption('q3', 'like', this)">like</span> /
                            <span class="option-item" data-question-id="q3" data-value="liking" onclick="selectOption('q3', 'liking', this)">liking</span>
                        </span>
                        <span> going out in the evening, there are a lot of good restaurants and bars.</span>
                        <input type="hidden" id="q3" name="q3">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon3"></i>
                </div>

                <div class="question-item">
                    <span class="question-number">4.</span>
                    <div class="question-content">
                        <span>Nam Dinh </span>
                        <span class="option-group" id="options-q4">
                            <span class="option-item" data-question-id="q4" data-value="is" onclick="selectOption('q4', 'is', this)">is</span> /
                            <span class="option-item" data-question-id="q4" data-value="to be" onclick="selectOption('q4', 'to be', this)">to be</span>
                        </span>
                        <span> in the northeast part of Vietnam.</span>
                        <input type="hidden" id="q4" name="q4">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon4"></i>
                </div>

                <div class="question-item">
                    <span class="question-number">5.</span>
                    <div class="question-content">
                        <span>I </span>
                        <span class="option-group" id="options-q5">
                            <span class="option-item" data-question-id="q5" data-value="am living" onclick="selectOption('q5', 'am living', this)">am living</span> /
                            <span class="option-item" data-question-id="q5" data-value="living" onclick="selectOption('q5', 'living', this)">living</span>
                        </span>
                        <span> with my uncle in Hanoi at the moment.</span>
                        <input type="hidden" id="q5" name="q5">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon5"></i>
                </div>
            </div>

            <hr>

            <h2>II. Ch·ªçn ƒë√°p √°n ƒë√∫ng nh·∫•t (A, B, C, D)</h2>
            <div class="mb-4">
                <div class="question-item d-block">
                    <span class="question-number d-inline-block">6.</span>
                    <div class="question-content d-inline">
                        <p>The bar chart <span class="placeholder-text">_________</span> the number of social networking sites visited by internet users in Canada in 2014 and in 2015.</p>
                        <div class="option-group" id="options-q6">
                            <span class="option-item" data-question-id="q6" data-value="A" onclick="selectOption('q6', 'A', this)">A. shows</span>
                            <span class="option-item" data-question-id="q6" data-value="B" onclick="selectOption('q6', 'B', this)">B. to show</span>
                            <span class="option-item" data-question-id="q6" data-value="C" onclick="selectOption('q6', 'C', this)">C. showing</span>
                            <span class="option-item" data-question-id="q6" data-value="D" onclick="selectOption('q6', 'D', this)">D. be showing</span>
                        </div>
                        <input type="hidden" id="q6" name="q6">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon6"></i>
                </div>

                <div class="question-item d-block">
                    <span class="question-number d-inline-block">7.</span>
                    <div class="question-content d-inline">
                        <p>The line graph <span class="placeholder-text">_________</span> the amount of consumption in different kinds of fast food from 1970 to 1990.</p>
                        <div class="option-group" id="options-q7">
                            <span class="option-item" data-question-id="q7" data-value="A" onclick="selectOption('q7', 'A', this)">A. illustrates</span>
                            <span class="option-item" data-question-id="q7" data-value="B" onclick="selectOption('q7', 'B', this)">B. illustrate</span>
                            <span class="option-item" data-question-id="q7" data-value="C" onclick="selectOption('q7', 'C', this)">C. illustrating</span>
                            <span class="option-item" data-question-id="q7" data-value="D" onclick="selectOption('q7', 'D', this)">D. to illustrate</span>
                        </div>
                        <input type="hidden" id="q7" name="q7">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon7"></i>
                </div>

                <div class="question-item d-block">
                    <span class="question-number d-inline-block">8.</span>
                    <div class="question-content d-inline">
                        <p>In contrast to this, the percentage of people who prefer to travel by car because it is more comfortable <span class="placeholder-text">_________</span> 40%.</p>
                        <div class="option-group" id="options-q8">
                            <span class="option-item" data-question-id="q8" data-value="A" onclick="selectOption('q8', 'A', this)">A. be</span>
                            <span class="option-item" data-question-id="q8" data-value="B" onclick="selectOption('q8', 'B', this)">B. being</span>
                            <span class="option-item" data-question-id="q8" data-value="C" onclick="selectOption('q8', 'C', this)">C. is</span>
                            <span class="option-item" data-question-id="q8" data-value="D" onclick="selectOption('q8', 'D', this)">D. to be</span>
                        </div>
                        <input type="hidden" id="q8" name="q8">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon8"></i>
                </div>

                <div class="question-item d-block">
                    <span class="question-number d-inline-block">9.</span>
                    <div class="question-content d-inline">
                        <p>To specify, after a small decrease from 300 to nearly 200 grams for the first 5 years, the amount of consumption in fish and chips <span class="placeholder-text">_________</span> from 1975 to 1985.</p>
                        <div class="option-group" id="options-q9">
                            <span class="option-item" data-question-id="q9" data-value="A" onclick="selectOption('q9', 'A', this)">A. remaining unchanged</span>
                            <span class="option-item" data-question-id="q9" data-value="B" onclick="selectOption('q9', 'B', this)">B. to remain unchanged</span>
                            <span class="option-item" data-question-id="q9" data-value="C" onclick="selectOption('q9', 'C', this)">C. to be remained unchanged</span>
                            <span class="option-item" data-question-id="q9" data-value="D" onclick="selectOption('q9', 'D', this)">D. remained unchanged</span>
                        </div>
                        <input type="hidden" id="q9" name="q9">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon9"></i>
                </div>

                <div class="question-item d-block">
                    <span class="question-number d-inline-block">10.</span>
                    <div class="question-content d-inline">
                        <p>Despite going up insignificantly from 20 to 30 grams for the first 5 years, the amount of consumption in Pizza <span class="placeholder-text">_________</span> quickly during the remaining years and reached a peak of 180 grams.</p>
                        <div class="option-group" id="options-q10">
                            <span class="option-item" data-question-id="q10" data-value="A" onclick="selectOption('q10', 'A', this)">A. soaring</span>
                            <span class="option-item" data-question-id="q10" data-value="B" onclick="selectOption('q10', 'B', this)">B. soared</span>
                            <span class="option-item" data-question-id="q10" data-value="C" onclick="selectOption('q10', 'C', this)">C. a soar</span>
                            <span class="option-item" data-question-id="q10" data-value="D" onclick="selectOption('q10', 'D', this)">D. to soar</span>
                        </div>
                        <input type="hidden" id="q10" name="q10">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon10"></i>
                </div>
            </div>

            <hr>

            <h2>III. Ch·ªçn d·∫°ng ƒë√∫ng c·ªßa t·ª´/c·ª•m t·ª´</h2>
            <div class="mb-4">
                <div class="question-item">
                    <span class="question-number">11.</span>
                    <div class="question-content">
                        <span>Going shopping </span>
                        <span class="option-group" id="options-q11">
                            <span class="option-item" data-question-id="q11" data-value="used to be a chore" onclick="selectOption('q11', 'used to be a chore', this)">used to be a chore</span> /
                            <span class="option-item" data-question-id="q11" data-value="using to be a chore" onclick="selectOption('q11', 'using to be a chore', this)">using to be a chore</span>
                        </span>
                        <span>, but recently it has become a leisure activity.</span>
                        <input type="hidden" id="q11" name="q11">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon11"></i>
                </div>

                <div class="question-item">
                    <span class="question-number">12.</span>
                    <div class="question-content">
                        <span>By contrast, shoppers nowadays </span>
                        <span class="option-group" id="options-q12">
                            <span class="option-item" data-question-id="q12" data-value="can find" onclick="selectOption('q12', 'can find', this)">can find</span> /
                            <span class="option-item" data-question-id="q12" data-value="finding" onclick="selectOption('q12', 'finding', this)">finding</span>
                        </span>
                        <span> almost anything in the supermarket or shopping mall.</span>
                        <input type="hidden" id="q12" name="q12">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon12"></i>
                </div>

                <div class="question-item">
                    <span class="question-number">13.</span>
                    <div class="question-content">
                        <span>To sum up, </span>
                        <span class="option-group" id="options-q13">
                            <span class="option-item" data-question-id="q13" data-value="there are" onclick="selectOption('q13', 'there are', this)">there are</span> /
                            <span class="option-item" data-question-id="q13" data-value="being" onclick="selectOption('q13', 'being', this)">being</span>
                        </span>
                        <span> some services which must be provided by the government such as defense and social security.</span>
                        <input type="hidden" id="q13" name="q13">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon13"></i>
                </div>

                <div class="question-item">
                    <span class="question-number">14.</span>
                    <div class="question-content">
                        <span>Social media </span>
                        <span class="option-group" id="options-q14">
                            <span class="option-item" data-question-id="q14" data-value="be" onclick="selectOption('q14', 'be', this)">be</span> /
                            <span class="option-item" data-question-id="q14" data-value="is" onclick="selectOption('q14', 'is', this)">is</span>
                        </span>
                        <span> becoming increasingly popular amongst all age groups. However, sharing personal information on social websites does have risks.</span>
                        <input type="hidden" id="q14" name="q14">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon14"></i>
                </div>
            </div>

            <hr>

            <h2>IV. Ch·ªçn ƒë√°p √°n ƒë√∫ng nh·∫•t (A, B, C, D)</h2>
            <div class="mb-4">
                <div class="question-item d-block">
                    <span class="question-number d-inline-block">15.</span>
                    <div class="question-content d-inline">
                        <p>Many parents never let children <span class="placeholder-text">_________</span> their passion, which makes children become tired with their unwanted job in the future.</p>
                        <div class="option-group" id="options-q15">
                            <span class="option-item" data-question-id="q15" data-value="A" onclick="selectOption('q15', 'A', this)">A. follow</span>
                            <span class="option-item" data-question-id="q15" data-value="B" onclick="selectOption('q15', 'B', this)">B. followed</span>
                            <span class="option-item" data-question-id="q15" data-value="C" onclick="selectOption('q15', 'C', this)">C. following</span>
                            <span class="option-item" data-question-id="q15" data-value="D" onclick="selectOption('q15', 'D', this)">D. follows</span>
                        </div>
                        <input type="hidden" id="q15" name="q15">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon15"></i>
                </div>

                <div class="question-item d-block">
                    <span class="question-number d-inline-block">16.</span>
                    <div class="question-content d-inline">
                        <p>There are some strategies that can <span class="placeholder-text">_________</span> used to encourage young people to keep abreast of the news.</p>
                        <div class="option-group" id="options-q16">
                            <span class="option-item" data-question-id="q16" data-value="A" onclick="selectOption('q16', 'A', this)">A. be</span>
                            <span class="option-item" data-question-id="q16" data-value="B" onclick="selectOption('q16', 'B', this)">B. being</span>
                            <span class="option-item" data-question-id="q16" data-value="C" onclick="selectOption('q16', 'C', this)">C. is</span>
                            <span class="option-item" data-question-id="q16" data-value="D" onclick="selectOption('q16', 'D', this)">D. are</span>
                        </div>
                        <input type="hidden" id="q16" name="q16">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon16"></i>
                </div>

                <div class="question-item d-block">
                    <span class="question-number d-inline-block">17.</span>
                    <div class="question-content d-inline">
                        <p>It is important that employers keep <span class="placeholder-text">_________</span> their workers by giving them encouragement frequently.</p>
                        <div class="option-group" id="options-q17">
                            <span class="option-item" data-question-id="q17" data-value="A" onclick="selectOption('q17', 'A', this)">A. inspiring</span>
                            <span class="option-item" data-question-id="q17" data-value="B" onclick="selectOption('q17', 'B', this)">B. inspired</span>
                            <span class="option-item" data-question-id="q17" data-value="C" onclick="selectOption('q17', 'C', this)">C. inspiration</span>
                            <span class="option-item" data-question-id="q17" data-value="D" onclick="selectOption('q17', 'D', this)">D. have inspired</span>
                        </div>
                        <input type="hidden" id="q17" name="q17">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon17"></i>
                </div>

                <div class="question-item d-block">
                    <span class="question-number d-inline-block">18.</span>
                    <div class="question-content d-inline">
                        <p>Crime is an issue of increasing concern around the world, and more money than ever before is being <span class="placeholder-text">_________</span> on the detection and punishment of criminal activity.</p>
                        <div class="option-group" id="options-q18">
                            <span class="option-item" data-question-id="q18" data-value="A" onclick="selectOption('q18', 'A', this)">A. spend</span>
                            <span class="option-item" data-question-id="q18" data-value="B" onclick="selectOption('q18', 'B', this)">B. spending</span>
                            <span class="option-item" data-question-id="q18" data-value="C" onclick="selectOption('q18', 'C', this)">C. spends</span>
                            <span class="option-item" data-question-id="q18" data-value="D" onclick="selectOption('q18', 'D', this)">D. spent</span>
                        </div>
                        <input type="hidden" id="q18" name="q18">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon18"></i>
                </div>

                <div class="question-item d-block">
                    <span class="question-number d-inline-block">19.</span>
                    <div class="question-content d-inline">
                        <p>In some countries an increasing number of people are <span class="placeholder-text">_________</span> from health problems as a result of eating too much fast food.</p>
                        <div class="option-group" id="options-q19">
                            <span class="option-item" data-question-id="q19" data-value="A" onclick="selectOption('q19', 'A', this)">A. suffer</span>
                            <span class="option-item" data-question-id="q19" data-value="B" onclick="selectOption('q19', 'B', this)">B. suffering</span>
                            <span class="option-item" data-question-id="q19" data-value="C" onclick="selectOption('q19', 'C', this)">C. suffers</span>
                            <span class="option-item" data-question-id="q19" data-value="D" onclick="selectOption('q19', 'D', this)">D. to suffer</span>
                        </div>
                        <input type="hidden" id="q19" name="q19">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon19"></i>
                </div>

                <div class="question-item d-block">
                    <span class="question-number d-inline-block">20.</span>
                    <div class="question-content d-inline">
                        <p>From an economic point of view, higher tax might <span class="placeholder-text">_________</span> an effective solution.</p>
                        <div class="option-group" id="options-q20">
                            <span class="option-item" data-question-id="q20" data-value="A" onclick="selectOption('q20', 'A', this)">A. seem</span>
                            <span class="option-item" data-question-id="q20" data-value="B" onclick="selectOption('q20', 'B', this)">B. to seem</span>
                            <span class="option-item" data-question-id="q20" data-value="C" onclick="selectOption('q20', 'C', this)">C. seeming</span>
                            <span class="option-item" data-question-id="q20" data-value="D" onclick="selectOption('q20', 'D', this)">D. seems</span>
                        </div>
                        <input type="hidden" id="q20" name="q20">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon20"></i>
                </div>

                <div class="question-item d-block">
                    <span class="question-number d-inline-block">21.</span>
                    <div class="question-content d-inline">
                        <p>In conclusion, imposing a higher tax on fast food <span class="placeholder-text">_________</span> to be the only way to tackle the problem.</p>
                        <div class="option-group" id="options-q21">
                            <span class="option-item" data-question-id="q21" data-value="A" onclick="selectOption('q21', 'A', this)">A. seem not</span>
                            <span class="option-item" data-question-id="q21" data-value="B" onclick="selectOption('q21', 'B', this)">B. does not seem</span>
                            <span class="option-item" data-question-id="q21" data-value="C" onclick="selectOption('q21', 'C', this)">C. seems</span>
                            <span class="option-item" data-question-id="q21" data-value="D" onclick="selectOption('q21', 'D', this)">D. seem</span>
                        </div>
                        <input type="hidden" id="q21" name="q21">
                    </div>
                    <i class="feedback-icon fa-solid" id="icon21"></i>
                </div>
            </div>

            <div class="buttons text-center mt-5">
                <button type="button" class="btn btn-primary me-3" onclick="submitAnswers()">Ki·ªÉm tra ‚ú®</button>
                <button type="button" class="btn btn-secondary" onclick="resetExercise()">L√†m l·∫°i üîÑ</button>
            </div>
        </form>

        <div id="scoreDisplay" class="score-display mt-4"></div>

        <div class="solution-section" id="detailedSolution">
            <h2>L·ªùi gi·∫£i chi ti·∫øt v√† Gi·∫£i th√≠ch</h2>
            <div class="solution-list">
                <!-- Solutions will be dynamically inserted here by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JavaScript bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
        // Define correct answers, context, explanations, and translations for each question.
        const questionsData = {
            'q1': {
                correct_answer: 'am also called',
                context: "My full name is Nguyen Van Phuc. I _________ by my English name, which is Jason.",
                translation: 'T√™n ƒë·∫ßy ƒë·ªß c·ªßa t√¥i l√† Nguy·ªÖn VƒÉn Ph√∫c. T√¥i c≈©ng ƒë∆∞·ª£c g·ªçi b·∫±ng t√™n ti·∫øng Anh l√† Jason.',
                explanation: 'C√¢u n√†y c·∫ßn d√πng th·ªÉ b·ªã ƒë·ªông (passive voice) v√¨ "t√¥i" ƒë∆∞·ª£c g·ªçi b·ªüi ng∆∞·ªùi kh√°c, kh√¥ng ph·∫£i t·ª± g·ªçi m√¨nh. "Am also called" l√† d·∫°ng b·ªã ƒë·ªông ƒë√∫ng.',
                grammar_note: 'Th√¨ hi·ªán t·∫°i ƒë∆°n, th·ªÉ b·ªã ƒë·ªông: S + am/is/are + V3/ed.'
            },
            'q2': {
                correct_answer: 'have',
                context: "Does your name _________ any special meaning?",
                translation: 'T√™n c·ªßa b·∫°n c√≥ √Ω nghƒ©a ƒë·∫∑c bi·ªát n√†o kh√¥ng?',
                explanation: 'Trong c√¢u h·ªèi v·ªõi tr·ª£ ƒë·ªông t·ª´ "Does", ƒë·ªông t·ª´ ch√≠nh ph·∫£i ·ªü d·∫°ng nguy√™n m·∫´u kh√¥ng "to".',
                grammar_note: 'C·∫•u tr√∫c c√¢u h·ªèi th√¨ hi·ªán t·∫°i ƒë∆°n: Do/Does + S + V (nguy√™n m·∫´u).'
            },
            'q3': {
                correct_answer: 'like',
                context: "If you _________ going out in the evening, there are a lot of good restaurants and bars.",
                translation: 'N·∫øu b·∫°n th√≠ch ƒëi ch∆°i v√†o bu·ªïi t·ªëi, c√≥ r·∫•t nhi·ªÅu nh√† h√†ng v√† qu√°n bar t·ªët.',
                explanation: 'M·ªánh ƒë·ªÅ ƒëi·ªÅu ki·ªán lo·∫°i 0 ho·∫∑c lo·∫°i 1, ƒë·ªông t·ª´ sau "If you" ph·∫£i ·ªü th√¨ hi·ªán t·∫°i ƒë∆°n.',
                grammar_note: 'M·ªánh ƒë·ªÅ "If": If + S + V (hi·ªán t·∫°i ƒë∆°n), S + V (hi·ªán t·∫°i ƒë∆°n/t∆∞∆°ng lai ƒë∆°n).'
            },
            'q4': {
                correct_answer: 'is',
                context: "Nam Dinh _________ in the northeast part of Vietnam.",
                translation: 'Nam ƒê·ªãnh n·∫±m ·ªü ph√≠a ƒë√¥ng b·∫Øc Vi·ªát Nam.',
                explanation: 'ƒê√¢y l√† m·ªôt s·ª± th·∫≠t hi·ªÉn nhi√™n, ƒë·ªông t·ª´ "to be" chia ·ªü th√¨ hi·ªán t·∫°i ƒë∆°n v·ªõi ch·ªß ng·ªØ s·ªë √≠t "Nam Dinh".',
                grammar_note: 'Th√¨ hi·ªán t·∫°i ƒë∆°n, ƒë·ªông t·ª´ "to be".'
            },
            'q5': {
                correct_answer: 'am living',
                context: "I _________ with my uncle in Hanoi at the moment.",
                translation: 'Hi·ªán t·∫°i t√¥i ƒëang s·ªëng v·ªõi ch√∫ t√¥i ·ªü H√† N·ªôi.',
                explanation: 'Tr·∫°ng t·ª´ "at the moment" ch·ªâ ra r·∫±ng h√†nh ƒë·ªông ƒëang di·ªÖn ra t·∫°i th·ªùi ƒëi·ªÉm n√≥i, do ƒë√≥ s·ª≠ d·ª•ng th√¨ hi·ªán t·∫°i ti·∫øp di·ªÖn.',
                grammar_note: 'Th√¨ hi·ªán t·∫°i ti·∫øp di·ªÖn: S + am/is/are + V-ing. D√πng v·ªõi c√°c tr·∫°ng t·ª´ nh∆∞ "at the moment", "now".'
            },
            'q6': {
                correct_answer: 'A', // shows
                context: "The bar chart _________ the number of social networking sites visited by internet users in Canada in 2014 and in 2015.",
                translation: 'Bi·ªÉu ƒë·ªì c·ªôt th·ªÉ hi·ªán s·ªë l∆∞·ª£ng trang m·∫°ng x√£ h·ªôi ƒë∆∞·ª£c ng∆∞·ªùi d√πng internet ·ªü Canada truy c·∫≠p v√†o nƒÉm 2014 v√† 2015.',
                explanation: 'Ch·ªß ng·ªØ "The bar chart" l√† s·ªë √≠t, ƒë·ªông t·ª´ c·∫ßn chia ·ªü th√¨ hi·ªán t·∫°i ƒë∆°n v√† ·ªü d·∫°ng ch·ªß ƒë·ªông ("shows"). C√°c l·ª±a ch·ªçn kh√°c kh√¥ng ƒë√∫ng c·∫•u tr√∫c ng·ªØ ph√°p cho m·ªôt c√¢u mi√™u t·∫£ bi·ªÉu ƒë·ªì.',
                grammar_note: 'ƒê·ªông t·ª´ mi√™u t·∫£ bi·ªÉu ƒë·ªì ·ªü th√¨ hi·ªán t·∫°i ƒë∆°n v·ªõi ch·ªß ng·ªØ s·ªë √≠t.'
            },
            'q7': {
                correct_answer: 'A', // illustrates
                context: "The line graph _________ the amount of consumption in different kinds of fast food from 1970 to 1990.",
                translation: 'Bi·ªÉu ƒë·ªì ƒë∆∞·ªùng minh h·ªça l∆∞·ª£ng ti√™u th·ª• c√°c lo·∫°i th·ª©c ƒÉn nhanh kh√°c nhau t·ª´ nƒÉm 1970 ƒë·∫øn 1990.',
                explanation: 'T∆∞∆°ng t·ª± c√¢u 6, ch·ªß ng·ªØ "The line graph" l√† s·ªë √≠t, ƒë·ªông t·ª´ c·∫ßn chia ·ªü th√¨ hi·ªán t·∫°i ƒë∆°n v√† ·ªü d·∫°ng ch·ªß ƒë·ªông ("illustrates").',
                grammar_note: 'ƒê·ªông t·ª´ mi√™u t·∫£ bi·ªÉu ƒë·ªì ·ªü th√¨ hi·ªán t·∫°i ƒë∆°n v·ªõi ch·ªß ng·ªØ s·ªë √≠t.'
            },
            'q8': {
                correct_answer: 'C', // is
                context: "In contrast to this, the percentage of people who prefer to travel by car because it is more comfortable _________ 40%.",
                translation: 'Ng∆∞·ª£c l·∫°i, t·ª∑ l·ªá ng∆∞·ªùi th√≠ch ƒëi √¥ t√¥ v√¨ n√≥ tho·∫£i m√°i h∆°n l√† 40%.',
                explanation: 'Ch·ªß ng·ªØ c·ªßa c√¢u l√† "the percentage" (s·ªë √≠t), n√™n ƒë·ªông t·ª´ "to be" ph·∫£i chia l√† "is".',
                grammar_note: 'S·ª± h√≤a h·ª£p gi·ªØa ch·ªß ng·ªØ v√† ƒë·ªông t·ª´: "the percentage of + Noun (s·ªë nhi·ªÅu)" v·∫´n ƒëi v·ªõi ƒë·ªông t·ª´ s·ªë √≠t.'
            },
            'q9': {
                correct_answer: 'D', // remained unchanged
                context: "To specify, after a small decrease from 300 to nearly 200 grams for the first 5 years, the amount of consumption in fish and chips _________ from 1975 to 1985.",
                translation: 'C·ª• th·ªÉ, sau m·ªôt s·ª± s·ª•t gi·∫£m nh·ªè t·ª´ 300 xu·ªëng g·∫ßn 200 gram trong 5 nƒÉm ƒë·∫ßu, l∆∞·ª£ng ti√™u th·ª• c√° v√† khoai t√¢y chi√™n v·∫´n kh√¥ng thay ƒë·ªïi t·ª´ nƒÉm 1975 ƒë·∫øn 1985.',
                explanation: 'C√¢u n√†y ƒëang m√¥ t·∫£ m·ªôt s·ª± ki·ªán ƒë√£ x·∫£y ra trong qu√° kh·ª© (t·ª´ 1975 ƒë·∫øn 1985), v√† "the amount of consumption" l√† ch·ªß ng·ªØ c·ªßa h√†nh ƒë·ªông "remained", do ƒë√≥ c·∫ßn m·ªôt ƒë·ªông t·ª´ chia ·ªü th√¨ qu√° kh·ª© ƒë∆°n, d·∫°ng ch·ªß ƒë·ªông.',
                grammar_note: 'Th√¨ qu√° kh·ª© ƒë∆°n ƒë·ªÉ mi√™u t·∫£ h√†nh ƒë·ªông trong kho·∫£ng th·ªùi gian c·ª• th·ªÉ trong qu√° kh·ª©.'
            },
            'q10': {
                correct_answer: 'B', // soared
                context: "Despite going up insignificantly from 20 to 30 grams for the first 5 years, the amount of consumption in Pizza _________ quickly during the remaining years and reached a peak of 180 grams.",
                translation: 'M·∫∑c d√π tƒÉng nh·∫π t·ª´ 20 l√™n 30 gram trong 5 nƒÉm ƒë·∫ßu, l∆∞·ª£ng ti√™u th·ª• Pizza ƒë√£ tƒÉng v·ªçt nhanh ch√≥ng trong nh·ªØng nƒÉm c√≤n l·∫°i v√† ƒë·∫°t ƒë·ªânh 180 gram.',
                explanation: 'T∆∞∆°ng t·ª± c√¢u 9, c√¢u n√†y mi√™u t·∫£ h√†nh ƒë·ªông ƒë√£ x·∫£y ra v√† ho√†n th√†nh trong qu√° kh·ª© ("reached a peak"), n√™n ƒë·ªông t·ª´ ch√≠nh c·∫ßn chia ·ªü th√¨ qu√° kh·ª© ƒë∆°n.',
                grammar_note: 'Th√¨ qu√° kh·ª© ƒë∆°n ƒë·ªÉ mi√™u t·∫£ chu·ªói h√†nh ƒë·ªông trong qu√° kh·ª©.'
            },
            'q11': {
                correct_answer: 'used to be a chore',
                context: "Going shopping _________, but recently it has become a leisure activity.",
                translation: 'ƒêi mua s·∫Øm t·ª´ng l√† m·ªôt vi·ªác v·∫∑t, nh∆∞ng g·∫ßn ƒë√¢y n√≥ ƒë√£ tr·ªü th√†nh m·ªôt ho·∫°t ƒë·ªông gi·∫£i tr√≠.',
                explanation: 'C·∫•u tr√∫c "used to + V" (t·ª´ng l√†m g√¨) ƒë·ªÉ di·ªÖn t·∫£ th√≥i quen ho·∫∑c tr·∫°ng th√°i trong qu√° kh·ª© kh√¥ng c√≤n ·ªü hi·ªán t·∫°i.',
                grammar_note: 'C·∫•u tr√∫c "used to + bare infinitive".'
            },
            'q12': {
                correct_answer: 'can find',
                context: "By contrast, shoppers nowadays _________ almost anything in the supermarket or shopping mall.",
                translation: 'Ng∆∞·ª£c l·∫°i, ng∆∞·ªùi mua s·∫Øm ng√†y nay c√≥ th·ªÉ t√¨m th·∫•y h·∫ßu h·∫øt m·ªçi th·ª© trong si√™u th·ªã ho·∫∑c trung t√¢m mua s·∫Øm.',
                explanation: 'ƒê·ªông t·ª´ khuy·∫øt thi·∫øu "can" (c√≥ th·ªÉ) ph·∫£i ƒëi v·ªõi ƒë·ªông t·ª´ nguy√™n m·∫´u kh√¥ng "to".',
                grammar_note: 'Modal verbs + bare infinitive.'
            },
            'q13': {
                correct_answer: 'there are',
                context: "To sum up, _________ some services which must be provided by the government such as defense and social security.",
                translation: 'T√≥m l·∫°i, c√≥ m·ªôt s·ªë d·ªãch v·ª• ph·∫£i ƒë∆∞·ª£c ch√≠nh ph·ªß cung c·∫•p nh∆∞ qu·ªëc ph√≤ng v√† an sinh x√£ h·ªôi.',
                explanation: 'C·∫•u tr√∫c "There is/are" ƒë·ªÉ gi·ªõi thi·ªáu s·ª± t·ªìn t·∫°i c·ªßa m·ªôt c√°i g√¨ ƒë√≥. "Services" l√† danh t·ª´ s·ªë nhi·ªÅu, n√™n d√πng "are".',
                grammar_note: 'C·∫•u tr√∫c "There is/are".'
            },
            'q14': {
                correct_answer: 'is',
                context: "Social media _________ becoming increasingly popular amongst all age groups.",
                translation: 'M·∫°ng x√£ h·ªôi ƒëang ng√†y c√†ng tr·ªü n√™n ph·ªï bi·∫øn trong m·ªçi l·ª©a tu·ªïi.',
                explanation: '"Social media" th∆∞·ªùng ƒë∆∞·ª£c coi l√† danh t·ª´ s·ªë √≠t trong ng·ªØ c·∫£nh n√†y, v√† c√¢u ƒëang di·ªÖn t·∫£ m·ªôt xu h∆∞·ªõng ƒëang di·ªÖn ra ("becoming increasingly popular"), n√™n d√πng th√¨ hi·ªán t·∫°i ti·∫øp di·ªÖn.',
                grammar_note: 'S·ª± h√≤a h·ª£p ch·ªß ng·ªØ-ƒë·ªông t·ª´: "Social media" th∆∞·ªùng ƒëi v·ªõi ƒë·ªông t·ª´ s·ªë √≠t.'
            },
            'q15': {
                correct_answer: 'A', // follow
                context: "Many parents never let children _________ their passion, which makes children become tired with their unwanted job in the future.",
                translation: 'Nhi·ªÅu b·∫≠c cha m·∫π kh√¥ng bao gi·ªù ƒë·ªÉ con c√°i theo ƒëu·ªïi ƒëam m√™ c·ªßa ch√∫ng, ƒëi·ªÅu n√†y khi·∫øn tr·∫ª em tr·ªü n√™n m·ªát m·ªèi v·ªõi c√¥ng vi·ªác kh√¥ng mong mu·ªën c·ªßa m√¨nh trong t∆∞∆°ng lai.',
                explanation: 'C·∫•u tr√∫c "let + O + V (bare infinitive)" (ƒë·ªÉ ai ƒë√≥ l√†m g√¨).',
                grammar_note: 'C·∫•u tr√∫c v·ªõi ƒë·ªông t·ª´ "let".'
            },
            'q16': {
                correct_answer: 'A', // be
                context: "There are some strategies that can _________ used to encourage young people to keep abreast of the news.",
                translation: 'C√≥ m·ªôt s·ªë chi·∫øn l∆∞·ª£c c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ khuy·∫øn kh√≠ch nh·ªØng ng∆∞·ªùi tr·∫ª tu·ªïi c·∫≠p nh·∫≠t tin t·ª©c.',
                explanation: 'Sau ƒë·ªông t·ª´ khuy·∫øt thi·∫øu "can" v√† tr∆∞·ªõc "used" (V3 trong b·ªã ƒë·ªông), c·∫ßn m·ªôt "be" ƒë·ªÉ t·∫°o th√†nh c·∫•u tr√∫c b·ªã ƒë·ªông "can be used".',
                grammar_note: 'C·∫•u tr√∫c b·ªã ƒë·ªông v·ªõi ƒë·ªông t·ª´ khuy·∫øt thi·∫øu: Modal + be + V3/ed.'
            },
            'q17': {
                correct_answer: 'B', // inspired
                context: "It is important that employers keep _________ their workers by giving them encouragement frequently.",
                translation: 'ƒêi·ªÅu quan tr·ªçng l√† c√°c nh√† tuy·ªÉn d·ª•ng ph·∫£i gi·ªØ cho nh√¢n vi√™n c·ªßa h·ªç ƒë∆∞·ª£c truy·ªÅn c·∫£m h·ª©ng b·∫±ng c√°ch th∆∞·ªùng xuy√™n ƒë·ªông vi√™n h·ªç.',
                explanation: 'C·∫•u tr√∫c "keep + O + V3/ed" (gi·ªØ cho ai ƒë√≥ ·ªü tr·∫°ng th√°i n√†o). "Workers" (ng∆∞·ªùi lao ƒë·ªông) b·ªã "truy·ªÅn c·∫£m h·ª©ng" (inspired) ch·ª© kh√¥ng ph·∫£i t·ª± truy·ªÅn c·∫£m h·ª©ng ("inspiring").',
                grammar_note: 'Ph√¢n t·ª´ qu√° kh·ª© (V3/ed) d√πng l√†m t√≠nh t·ª´ ch·ªâ k·∫øt qu·∫£ c·ªßa h√†nh ƒë·ªông, th∆∞·ªùng d√πng v·ªõi th·ªÉ b·ªã ƒë·ªông.'
            },
            'q18': {
                correct_answer: 'D', // spent
                context: "Crime is an issue of increasing concern around the world, and more money than ever before is being _________ on the detection and punishment of criminal activity.",
                translation: 'T·ªôi ph·∫°m l√† m·ªôt v·∫•n ƒë·ªÅ ng√†y c√†ng ƒë√°ng lo ng·∫°i tr√™n kh·∫Øp th·∫ø gi·ªõi, v√† nhi·ªÅu ti·ªÅn h∆°n bao gi·ªù h·∫øt ƒëang ƒë∆∞·ª£c chi cho vi·ªác ph√°t hi·ªán v√† tr·ª´ng ph·∫°t c√°c ho·∫°t ƒë·ªông t·ªôi ph·∫°m.',
                explanation: 'C·∫•u tr√∫c b·ªã ƒë·ªông c·ªßa th√¨ hi·ªán t·∫°i ti·∫øp di·ªÖn: "is being + V3/ed". "Money" (ti·ªÅn) ƒë∆∞·ª£c "chi ti√™u" ("spent"), kh√¥ng ph·∫£i t·ª± n√≥ "chi ti√™u".',
                grammar_note: 'Th√¨ hi·ªán t·∫°i ti·∫øp di·ªÖn, th·ªÉ b·ªã ƒë·ªông: S + is/am/are + being + V3/ed.'
            },
            'q19': {
                correct_answer: 'B', // suffering
                context: "In some countries an increasing number of people are _________ from health problems as a result of eating too much fast food.",
                translation: '·ªû m·ªôt s·ªë qu·ªëc gia, ng√†y c√†ng c√≥ nhi·ªÅu ng∆∞·ªùi ƒëang m·∫Øc c√°c v·∫•n ƒë·ªÅ s·ª©c kh·ªèe do ƒÉn qu√° nhi·ªÅu th·ª©c ƒÉn nhanh.',
                explanation: 'C·∫•u tr√∫c "are + V-ing" ƒë·ªÉ t·∫°o th√†nh th√¨ hi·ªán t·∫°i ti·∫øp di·ªÖn, di·ªÖn t·∫£ h√†nh ƒë·ªông ƒëang di·ªÖn ra. "Suffer from" l√† c·ª•m ƒë·ªông t·ª´ "ch·ªãu ƒë·ª±ng, m·∫Øc ph·∫£i".',
                grammar_note: 'Th√¨ hi·ªán t·∫°i ti·∫øp di·ªÖn: S + is/am/are + V-ing.'
            },
            'q20': {
                correct_answer: 'A', // seem
                context: "From an economic point of view, higher tax might _________ an effective solution.",
                translation: 'T·ª´ g√≥c ƒë·ªô kinh t·∫ø, thu·∫ø cao h∆°n c√≥ v·∫ª l√† m·ªôt gi·∫£i ph√°p hi·ªáu qu·∫£.',
                explanation: 'Sau ƒë·ªông t·ª´ khuy·∫øt thi·∫øu "might", ƒë·ªông t·ª´ ch√≠nh ph·∫£i ·ªü d·∫°ng nguy√™n m·∫´u kh√¥ng "to".',
                grammar_note: 'Modal verbs + bare infinitive.'
            },
            'q21': {
                correct_answer: 'B', // does not seem
                context: "In conclusion, imposing a higher tax on fast food _________ to be the only way to tackle the problem.",
                translation: 'T√≥m l·∫°i, vi·ªác √°p ƒë·∫∑t thu·∫ø cao h∆°n ƒë·ªëi v·ªõi th·ª©c ƒÉn nhanh d∆∞·ªùng nh∆∞ kh√¥ng ph·∫£i l√† c√°ch duy nh·∫•t ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ.',
                explanation: 'Ch·ªß ng·ªØ "imposing a higher tax on fast food" l√† m·ªôt danh ƒë·ªông t·ª´ (gerund phrase), ƒë∆∞·ª£c coi l√† s·ªë √≠t, n√™n ƒë·ªông t·ª´ ch√≠nh c·∫ßn chia ·ªü s·ªë √≠t v√† ·ªü d·∫°ng ph·ªß ƒë·ªãnh ƒë√∫ng l√† "does not seem".',
                grammar_note: 'Danh ƒë·ªông t·ª´ l√†m ch·ªß ng·ªØ lu√¥n ·ªü d·∫°ng s·ªë √≠t. ƒê·ªông t·ª´ "seem" c√≥ "to be" theo sau.'
            }
        };

        /**
         * H√†m x·ª≠ l√Ω khi ng∆∞·ªùi d√πng ch·ªçn m·ªôt t√πy ch·ªçn.
         * @param {string} questionId - ID c·ªßa c√¢u h·ªèi (v√≠ d·ª•: 'q1').
         * @param {string} selectedValue - Gi√° tr·ªã c·ªßa t√πy ch·ªçn ƒë∆∞·ª£c ch·ªçn.
         * @param {HTMLElement} clickedElement - Ph·∫ßn t·ª≠ HTML (span) m√† ng∆∞·ªùi d√πng ƒë√£ click.
         */
        function selectOption(questionId, selectedValue, clickedElement) {
            // L·∫•y input ·∫©n ƒë·ªÉ l∆∞u gi√° tr·ªã ƒë√£ ch·ªçn
            const hiddenInput = document.getElementById(questionId);
            hiddenInput.value = selectedValue;

            // X√≥a l·ªõp 'selected-option' kh·ªèi t·∫•t c·∫£ c√°c t√πy ch·ªçn kh√°c c·ªßa c√¢u h·ªèi n√†y
            const optionGroup = clickedElement.closest('.option-group');
            if (optionGroup) {
                const allOptions = optionGroup.querySelectorAll('.option-item');
                allOptions.forEach(option => {
                    option.classList.remove('selected-option', 'is-correct', 'is-incorrect');
                });
            }

            // Th√™m l·ªõp 'selected-option' v√†o t√πy ch·ªçn ƒë√£ click
            clickedElement.classList.add('selected-option');

            // ·∫®n icon ph·∫£n h·ªìi c≈© n·∫øu c√≥
            const feedbackIcon = document.getElementById(`icon${questionId.substring(1)}`);
            if (feedbackIcon) {
                feedbackIcon.style.display = 'none';
                feedbackIcon.classList.remove('fa-check-circle', 'fa-times-circle', 'text-success', 'text-danger');
            }
        }

        /**
         * G·ª≠i c√¢u tr·∫£ l·ªùi c·ªßa ng∆∞·ªùi d√πng, t√≠nh ƒëi·ªÉm, cung c·∫•p ph·∫£n h·ªìi
         * v√† hi·ªÉn th·ªã l·ªùi gi·∫£i chi ti·∫øt.
         */
        function submitAnswers() {
            let score = 0;
            const totalQuestions = Object.keys(questionsData).length;

            const solutionListDiv = document.querySelector('#detailedSolution .solution-list');
            solutionListDiv.innerHTML = ''; // X√≥a c√°c l·ªùi gi·∫£i c≈©
            document.getElementById('detailedSolution').style.display = 'block'; // Hi·ªÉn th·ªã ph·∫ßn l·ªùi gi·∫£i

            // L·∫∑p qua t·ª´ng c√¢u h·ªèi
            Object.keys(questionsData).forEach(qId => {
                const questionInfo = questionsData[qId];
                const hiddenInput = document.getElementById(qId); // L·∫•y input ·∫©n ƒë·ªÉ l·∫•y gi√° tr·ªã
                const feedbackIcon = document.getElementById(`icon${qId.substring(1)}`);
                const selectedOptionElement = document.querySelector(`#options-${qId} .option-item.selected-option`); // L·∫•y ph·∫ßn t·ª≠ t√πy ch·ªçn ƒëang ƒë∆∞·ª£c ch·ªçn

                // X√≥a c√°c l·ªõp ph·∫£n h·ªìi c≈© tr√™n t·∫•t c·∫£ c√°c t√πy ch·ªçn c·ªßa c√¢u h·ªèi n√†y
                const allOptionsForQuestion = document.querySelectorAll(`#options-${qId} .option-item`);
                allOptionsForQuestion.forEach(option => {
                    option.classList.remove('is-correct', 'is-incorrect');
                });

                const userAnswer = hiddenInput.value.trim().toLowerCase();
                const correctAnswer = String(questionInfo.correct_answer).toLowerCase();

                let isCorrect = false;
                // For A/B/C/D questions, compare the selected letter. For others, compare the full value.
                if (['q6', 'q7', 'q8', 'q9', 'q10', 'q15', 'q16', 'q17', 'q18', 'q19', 'q20', 'q21'].includes(qId)) {
                    // Compare only the letter (A, B, C, D)
                    if (userAnswer.charAt(0).toUpperCase() === correctAnswer.charAt(0).toUpperCase()) {
                        isCorrect = true;
                        score++;
                        if (selectedOptionElement) {
                            selectedOptionElement.classList.add('is-correct');
                        }
                    } else {
                        if (selectedOptionElement) {
                            selectedOptionElement.classList.add('is-incorrect');
                        }
                        // Highlight the correct option if user chose incorrectly
                        const correctOptionElement = document.querySelector(`#options-${qId} .option-item[data-value="${questionInfo.correct_answer}"]`);
                        if (correctOptionElement) {
                            correctOptionElement.classList.add('is-correct');
                        }
                    }
                } else {
                    // For direct word/phrase selection
                    if (userAnswer === correctAnswer) {
                        isCorrect = true;
                        score++;
                        if (selectedOptionElement) {
                            selectedOptionElement.classList.add('is-correct');
                        }
                    } else {
                        if (selectedOptionElement) {
                            selectedOptionElement.classList.add('is-incorrect');
                        }
                        // Highlight the correct option if user chose incorrectly
                        const correctOptionElement = document.querySelector(`#options-${qId} .option-item[data-value="${questionInfo.correct_answer}"]`);
                        if (correctOptionElement) {
                            correctOptionElement.classList.add('is-correct');
                        }
                    }
                }


                // Hi·ªÉn th·ªã icon ph·∫£n h·ªìi
                if (feedbackIcon) {
                    feedbackIcon.classList.remove('fa-check-circle', 'fa-times-circle', 'text-success', 'text-danger');
                    if (isCorrect) {
                        feedbackIcon.classList.add('fa-check-circle', 'text-success');
                    } else {
                        feedbackIcon.classList.add('fa-times-circle', 'text-danger');
                    }
                    feedbackIcon.style.display = 'inline-block';
                }

                // Th√™m l·ªùi gi·∫£i chi ti·∫øt
                const solutionItem = document.createElement('div');
                solutionItem.classList.add('solution-item');

                const questionNumber = qId.substring(1);
                const questionTextSolutionDiv = document.createElement('div');
                questionTextSolutionDiv.classList.add('question-text-solution');

                // X√¢y d·ª±ng c√¢u ho√†n ch·ªânh/c·ª•m t·ª´ ƒë·ªÉ hi·ªÉn th·ªã
                let fullSentenceHtml = questionInfo.context.replace(/_________/, `<span class="correct-answer-text">${
                    // For A/B/C/D questions, show the full correct option text, not just the letter
                    ['q6', 'q7', 'q8', 'q9', 'q10', 'q15', 'q16', 'q17', 'q18', 'q19', 'q20', 'q21'].includes(qId)
                        ? document.querySelector(`#options-${qId} .option-item[data-value="${questionInfo.correct_answer}"]`).textContent
                        : questionInfo.correct_answer
                }</span>`);
                
                // N·∫øu l√† c√¢u h·ªèi tr·∫Øc nghi·ªám A, B, C, D, hi·ªÉn th·ªã th√™m ƒë√°p √°n ch·ªØ c√°i
                if (['q6', 'q7', 'q8', 'q9', 'q10', 'q15', 'q16', 'q17', 'q18', 'q19', 'q20', 'q21'].includes(qId)) {
                    fullSentenceHtml += ` (ƒê√°p √°n: ${String(questionInfo.correct_answer).toUpperCase()})`;
                }
                questionTextSolutionDiv.innerHTML = `<strong>C√¢u h·ªèi:</strong> ${questionNumber}. ${fullSentenceHtml}`;
                solutionItem.appendChild(questionTextSolutionDiv);

                const grammarExplanationDiv = document.createElement('div');
                grammarExplanationDiv.classList.add('grammar-explanation');
                grammarExplanationDiv.innerHTML = `<strong>Gi·∫£i th√≠ch:</strong> ${questionInfo.explanation}<br><em>${questionInfo.grammar_note}</em>`;
                solutionItem.appendChild(grammarExplanationDiv);

                const translationDiv = document.createElement('div');
                translationDiv.classList.add('translation');
                translationDiv.innerHTML = `<strong>D·ªãch:</strong> ${questionInfo.translation || 'Kh√¥ng c√≥ b·∫£n d·ªãch.'}`;
                solutionItem.appendChild(translationDiv);

                solutionListDiv.appendChild(solutionItem);
            });

            // Hi·ªÉn th·ªã ƒëi·ªÉm s·ªë
            const scoreDisplay = document.getElementById('scoreDisplay');
            scoreDisplay.textContent = `B·∫°n ƒë√£ ƒë·∫°t ${score} / ${totalQuestions} ƒëi·ªÉm.`;

            // √Åp d·ª•ng m√£ m√†u cho hi·ªÉn th·ªã ƒëi·ªÉm s·ªë d·ª±a tr√™n hi·ªáu su·∫•t
            scoreDisplay.classList.remove('text-success', 'text-warning', 'text-danger');
            if (score === totalQuestions) {
                scoreDisplay.classList.add('text-success');
            } else if (score >= totalQuestions * 0.7) { // 70% ho·∫∑c h∆°n
                scoreDisplay.classList.add('text-warning');
            } else {
                scoreDisplay.classList.add('text-danger');
            }
            scoreDisplay.style.display = 'block'; // Hi·ªÉn th·ªã ƒëi·ªÉm s·ªë

            // Cu·ªôn ƒë·∫øn ph·∫ßn hi·ªÉn th·ªã ƒëi·ªÉm s·ªë
            scoreDisplay.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        /**
         * ƒê·∫∑t l·∫°i b√†i t·∫≠p b·∫±ng c√°ch x√≥a c√°c tr∆∞·ªùng nh·∫≠p li·ªáu, ·∫©n ph·∫£n h·ªìi, ƒëi·ªÉm s·ªë v√† l·ªùi gi·∫£i.
         */
        function resetExercise() {
            const hiddenInputs = document.querySelectorAll('input[type="hidden"]');
            hiddenInputs.forEach(input => {
                input.value = ''; // X√≥a gi√° tr·ªã input ·∫©n
            });

            const allOptions = document.querySelectorAll('.option-item');
            allOptions.forEach(option => {
                option.classList.remove('selected-option', 'is-correct', 'is-incorrect'); // X√≥a c√°c l·ªõp ph·∫£n h·ªìi v√† ch·ªçn
            });

            const feedbackIcons = document.querySelectorAll('.feedback-icon');
            feedbackIcons.forEach(icon => {
                icon.classList.remove('fa-check-circle', 'fa-times-circle', 'text-success', 'text-danger');
                icon.style.display = 'none'; // ·∫®n icon ph·∫£n h·ªìi
            });

            document.getElementById('scoreDisplay').textContent = ''; // X√≥a vƒÉn b·∫£n ƒëi·ªÉm s·ªë
            document.getElementById('scoreDisplay').style.display = 'none'; // ·∫®n hi·ªÉn th·ªã ƒëi·ªÉm s·ªë
            document.getElementById('detailedSolution').style.display = 'none'; // ·∫®n ph·∫ßn l·ªùi gi·∫£i
            document.querySelector('#detailedSolution .solution-list').innerHTML = ''; // X√≥a danh s√°ch l·ªùi gi·∫£i
        }
    </script>
</body>
</html>
